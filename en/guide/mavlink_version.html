<!DOCTYPE HTML><html lang="en"><head><meta charset="UTF-8"><meta content="text/html; charset=utf-8"http-equiv="Content-Type"><title>MAVLink Versions Â· MAVLink Developer Guide</title><meta content="IE=edge"http-equiv="X-UA-Compatible"/><meta content=""name="description"><meta content="GitBook 3.2.3"name="generator"><link href="../../gitbook/style.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-anchors/plugin.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-page-toc-button/plugin.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-language-picker/plugin.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-richquotes/plugin.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-highlight/website.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-search/search.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-fontsettings/website.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-theme-api/theme-api.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-theme-dronecode/theme_styles.css"rel="stylesheet"><meta content="true"name="HandheldFriendly"/><meta content="width=device-width,initial-scale=1,user-scalable=no"name="viewport"><meta content="yes"name="apple-mobile-web-app-capable"><meta content="black"name="apple-mobile-web-app-status-bar-style"><link href="../../gitbook/images/apple-touch-icon-precomposed-152.png"rel="apple-touch-icon-precomposed"sizes="152x152"><link href="../../gitbook/images/favicon.ico"rel="shortcut icon"type="image/x-icon"><link href="mavlink_2.html"rel="next"/><link href="./"rel="prev"/></head><body><div id="common_dronecode_menu"><div class="large_version common_menu_logo"><a href="https://mavlink.io/en/"><img alt="Dronecode logo (large)"src="../../assets/site/logo_mavlink_header.png"/></a></div><div class="small_version common_menu_logo"><a href="https://mavlink.io/en/"><img alt="Dronecode logo (small)"src="../../assets/site/logo_mavlink_header.png"/></a></div><div class="common_menu_options"><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/messages/common.html">Messages</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/messages/common.html">Messages</a></div><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/about/faq.html">FAQ</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/about/faq.html">FAQ</a></div><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/about/implementations.html">Implementations</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/about/implementations.html">Implementations</a></div><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/mavgen_c/examples.html">Examples</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/mavgen_c/examples.html">Examples</a></div><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/about/support.html">Support</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/about/support.html">Help</a></div></div></div><div class="book"><div class="book-summary"><div id="book-search-input"role="search"><input placeholder="Type to search"type="text"/></div><nav role="navigation"><ul class="summary"><li class="chapter"data-level="1.1"data-path="../"><a href="../">Introduction</a><ul class="articles"><li class="chapter"data-level="1.1.1"data-path="../about/overview.html"><a href="../about/overview.html">Overview</a></li><li class="chapter"data-level="1.1.2"data-path="../about/faq.html"><a href="../about/faq.html">FAQ</a></li><li class="chapter"data-level="1.1.3"data-path="../about/implementations.html"><a href="../about/implementations.html">Implementations</a></li></ul></li><li class="chapter"data-level="1.2"data-path="../getting_started/"><a href="../getting_started/">Getting Started</a><ul class="articles"><li class="chapter"data-level="1.2.1"data-path="../getting_started/installation.html"><a href="../getting_started/installation.html">Install MAVLink</a></li><li class="chapter"data-level="1.2.2"data-path="../getting_started/generate_libraries.html"><a href="../getting_started/generate_libraries.html">Generate MAVLink Libraries</a></li><li class="chapter"data-level="1.2.3"data-path="../getting_started/ros.html"><a href="../getting_started/ros.html">Generate Source Files for ROS</a></li></ul></li><li class="chapter"data-level="1.3"data-path="../getting_started/use_libraries.html"><a href="../getting_started/use_libraries.html">Using MAVLink Libraries</a><ul class="articles"><li class="chapter"data-level="1.3.1"data-path="../mavgen_c/"><a href="../mavgen_c/">C (mavgen)</a><ul class="articles"><li class="chapter"data-level="1.3.1.1"data-path="../mavgen_c/message_signing_c.html"><a href="../mavgen_c/message_signing_c.html">Message Signing</a></li><li class="chapter"data-level="1.3.1.2"data-path="../mavgen_c/examples.html"><a href="../mavgen_c/examples.html">Examples</a><ul class="articles"><li class="chapter"data-level="1.3.1.2.1"data-path="../mavgen_c/example_c_uart.html"><a href="../mavgen_c/example_c_uart.html">UART Interface (C)</a></li><li class="chapter"data-level="1.3.1.2.2"data-path="../mavgen_c/example_c_udp.html"><a href="../mavgen_c/example_c_udp.html">UDP Example (C)</a></li></ul></li></ul></li><li class="chapter"data-level="1.3.2"data-path="../mavgen_python/"><a href="../mavgen_python/">Pymavlink (Python-mavgen)</a><ul class="articles"><li class="chapter"data-level="1.3.2.1"data-path="../mavgen_python/howto_requestmessages.html"><a href="../mavgen_python/howto_requestmessages.html">How to Request Messages/Set Message Rates</a></li><li class="chapter"data-level="1.3.2.2"data-path="../mavgen_python/message_signing.html"><a href="../mavgen_python/message_signing.html">Message Signing</a></li><li class="chapter"data-level="1.3.2.3"data-path="../mavgen_python/examples.html"><a href="../mavgen_python/examples.html">Examples</a></li></ul></li></ul></li><li class="chapter"data-level="1.4"data-path="./"><a href="./">Guide</a><ul class="articles"><li class="chapter active"data-level="1.4.1"data-path="mavlink_version.html"><a href="mavlink_version.html">MAVLink Versions</a></li><li class="chapter"data-level="1.4.2"data-path="mavlink_2.html"><a href="mavlink_2.html">MAVLink 2</a></li><li class="chapter"data-level="1.4.3"data-path="message_signing.html"><a href="message_signing.html">Message Signing</a></li><li class="chapter"data-level="1.4.4"data-path="serialization.html"><a href="serialization.html">Serialization</a></li><li class="chapter"data-level="1.4.5"data-path="routing.html"><a href="routing.html">Routing</a></li><li class="chapter"data-level="1.4.6"data-path="general_telemetry.html"><a href="general_telemetry.html">General Telemetry</a></li><li class="chapter"data-level="1.4.7"data-path="offboard_control.html"><a href="offboard_control.html">Offboard Control</a></li><li class="chapter"data-level="1.4.8"data-path="../file_formats/"><a href="../file_formats/">File Formats</a></li><li class="chapter"data-level="1.4.9"data-path="uavcan_interaction.html"><a href="uavcan_interaction.html">UAVCAN Interaction</a></li><li class="chapter"data-level="1.4.10"data-path="scripts.html"><a href="scripts.html">Scripts</a></li><li class="chapter"data-level="1.4.11"data-path="xml_schema.html"><a href="xml_schema.html">MAVLink XML Schema</a></li><li class="chapter"data-level="1.4.12"data-path="define_xml_element.html"><a href="define_xml_element.html">Defining XML Enums/Messages</a></li><li class="chapter"data-level="1.4.13"data-path="crc.html"><a href="crc.html">MAVLink CRC</a></li><li class="chapter"data-level="1.4.14"data-path="wireshark.html"><a href="wireshark.html">Debugging with Wireshark</a></li><li class="chapter"data-level="1.4.15"data-path="../messages/"><a href="../messages/">Dialects</a><ul class="articles"><li class="chapter"data-level="1.4.15.1"data-path="../messages/ASLUAV.html"><a href="../messages/ASLUAV.html">ASLUAV.xml</a></li><li class="chapter"data-level="1.4.15.2"data-path="../messages/all.html"><a href="../messages/all.html">all.xml</a></li><li class="chapter"data-level="1.4.15.3"data-path="../messages/ardupilotmega.html"><a href="../messages/ardupilotmega.html">ardupilotmega.xml</a></li><li class="chapter"data-level="1.4.15.4"data-path="../messages/autoquad.html"><a href="../messages/autoquad.html">autoquad.xml</a></li><li class="chapter"data-level="1.4.15.5"data-path="../messages/development.html"><a href="../messages/development.html">development.xml</a></li><li class="chapter"data-level="1.4.15.6"data-path="../messages/icarous.html"><a href="../messages/icarous.html">icarous.xml</a></li><li class="chapter"data-level="1.4.15.7"data-path="../messages/matrixpilot.html"><a href="../messages/matrixpilot.html">matrixpilot.xml</a></li><li class="chapter"data-level="1.4.15.8"data-path="../messages/minimal.html"><a href="../messages/minimal.html">minimal.xml</a></li><li class="chapter"data-level="1.4.15.9"data-path="../messages/paparazzi.html"><a href="../messages/paparazzi.html">paparazzi.xml</a></li><li class="chapter"data-level="1.4.15.10"data-path="../messages/python_array_test.html"><a href="../messages/python_array_test.html">python_array_test.xml</a></li><li class="chapter"data-level="1.4.15.11"data-path="../messages/standard.html"><a href="../messages/standard.html">standard.xml</a></li><li class="chapter"data-level="1.4.15.12"data-path="../messages/test.html"><a href="../messages/test.html">test.xml</a></li><li class="chapter"data-level="1.4.15.13"data-path="../messages/uAvionix.html"><a href="../messages/uAvionix.html">uAvionix.xml</a></li><li class="chapter"data-level="1.4.15.14"data-path="../messages/ualberta.html"><a href="../messages/ualberta.html">ualberta.xml</a></li></ul></li></ul></li><li class="chapter"data-level="1.5"data-path="../messages/common.html"><a href="../messages/common.html">Messages (common)</a></li><li class="chapter"data-level="1.6"data-path="../services/"><a href="../services/">Microservices</a><ul class="articles"><li class="chapter"data-level="1.6.1"data-path="../services/heartbeat.html"><a href="../services/heartbeat.html">Heartbeat/Connection Protocol</a></li><li class="chapter"data-level="1.6.2"data-path="../services/mission.html"><a href="../services/mission.html">Mission Protocol</a></li><li class="chapter"data-level="1.6.3"data-path="../services/parameter.html"><a href="../services/parameter.html">Parameter Protocol</a></li><li class="chapter"data-level="1.6.4"data-path="../services/parameter_ext.html"><a href="../services/parameter_ext.html">Extended Parameter Protocol</a></li><li class="chapter"data-level="1.6.5"data-path="../services/command.html"><a href="../services/command.html">Command Protocol</a></li><li class="chapter"data-level="1.6.6"data-path="../services/manual_control.html"><a href="../services/manual_control.html">Manual Control (Joystick) Protocol</a></li><li class="chapter"data-level="1.6.7"data-path="../services/camera.html"><a href="../services/camera.html">Camera Protocol</a><ul class="articles"><li class="chapter"data-level="1.6.7.1"data-path="../services/camera_def.html"><a href="../services/camera_def.html">Camera Definition</a></li></ul></li><li class="chapter"data-level="1.6.8"data-path="../services/gimbal_v2.html"><a href="../services/gimbal_v2.html">Gimbal Protocol v2</a><ul class="articles"><li class="chapter"data-level="1.6.8.1"data-path="../services/gimbal.html"><a href="../services/gimbal.html">Gimbal Protocol v1 (superseded)</a></li></ul></li><li class="chapter"data-level="1.6.9"data-path="../services/arm_authorization.html"><a href="../services/arm_authorization.html">Arm Authorization Protocol</a></li><li class="chapter"data-level="1.6.10"data-path="../services/image_transmission.html"><a href="../services/image_transmission.html">Image Transmission Protocol</a></li><li class="chapter"data-level="1.6.11"data-path="../services/ftp.html"><a href="../services/ftp.html">File Transfer Protocol (FTP)</a></li><li class="chapter"data-level="1.6.12"data-path="../services/landing_target.html"><a href="../services/landing_target.html">Landing Target Protocol</a></li><li class="chapter"data-level="1.6.13"data-path="../services/ping.html"><a href="../services/ping.html">Ping Protocol</a></li><li class="chapter"data-level="1.6.14"data-path="../services/trajectory.html"><a href="../services/trajectory.html">Path Planning (Trajectory) Protocol</a></li><li class="chapter"data-level="1.6.15"data-path="../services/battery.html"><a href="../services/battery.html">Battery Protocol</a></li><li class="chapter"data-level="1.6.16"data-path="../services/terrain.html"><a href="../services/terrain.html">Terrain Protocol</a></li><li class="chapter"data-level="1.6.17"data-path="../services/tunnel.html"><a href="../services/tunnel.html">Tunnel Protocol</a></li><li class="chapter"data-level="1.6.18"data-path="../services/opendroneid.html"><a href="../services/opendroneid.html">Open Drone ID Protocol</a></li><li class="chapter"data-level="1.6.19"data-path="../services/high_latency.html"><a href="../services/high_latency.html">High Latency Protocol</a></li><li class="chapter"data-level="1.6.20"data-path="../services/component_information.html"><a href="../services/component_information.html">Component Metadata Protocol (WIP)</a></li><li class="chapter"data-level="1.6.21"data-path="../services/payload.html"><a href="../services/payload.html">Payload Protocols</a></li><li class="chapter"data-level="1.6.22"data-path="../services/traffic_management.html"><a href="../services/traffic_management.html">Traffic Managment (UTM/ADS-B)</a></li><li class="chapter"data-level="1.6.23"data-path="../services/events.html"><a href="../services/events.html">Events Interface (WIP)</a></li><li class="chapter"data-level="1.6.24"data-path="../services/timesync.html"><a href="../services/timesync.html">Time Synchronization</a></li></ul></li><li class="chapter"data-level="1.7"data-path="../contributing/contributing.html"><a href="../contributing/contributing.html">Contributing</a></li><li class="chapter"data-level="1.8"data-path="../about/support.html"><a href="../about/support.html">Support</a></li><li class="divider"></li><li><a href="https://www.gitbook.com"class="gitbook-link"target="blank">Published with GitBook</a></li></ul></nav></div><div class="book-body"><div class="body-inner"><div class="book-header"role="navigation"><h1><i class="fa fa-circle-o-notch fa-spin"></i> <a href="..">MAVLink Versions</a></h1></div><div class="page-wrapper"role="main"tabindex="-1"><div class="page-inner"><div id="book-search-results"><div class="search-noresults"><section class="markdown-section normal"><h1 id="mavlink-versions"><a href="#mavlink-versions"class="plugin-anchor"name="mavlink-versions"><i class="fa fa-link"aria-hidden="true"></i></a>MAVLink Versions</h1><p>MAVLink has been deployed in a number of versions:</p><ul><li><a href="mavlink_2.html">MAVLink 2.0</a>: Current/recommended major version. Adopted by major users early 2017.</li><li><em>MAVLink v1.0</em>: Widely adopted around 2013. Still used by a number of legacy peripherals.</li></ul><p>The <em>MAVLink 2.0</em> C/C++ and Python libraries are backwards compatible with MAVLink 1.0 (support both protocols). <a href="#version_handshaking">Version Handshaking</a> and <a href="#negotiating_versions">Negotiating Versions</a> explain how to choose which version is used.</p><blockquote class="alert clearfix alert-info"><strong class="fa fa-2x fa-edit"></strong><p><em>MAVLink v0.9</em> is a pre-release version that is no longer supported. The associated message set deleted in August 2018. Legacy code may be present in generator and test code.</p></blockquote><h2 id="determining-protocolmessage-version"><a href="#determining-protocolmessage-version"class="plugin-anchor"name="determining-protocolmessage-version"><i class="fa fa-link"aria-hidden="true"></i></a>Determining Protocol/Message Version</h2><p>A library&apos;s MAVLink support can be determined in a number of ways:</p><ul><li><a href="../messages/common.html#AUTOPILOT_VERSION">AUTOPILOT_VERSION</a><code>.capabilities</code> can be checked against the <a href="../messages/common.html#MAV_PROTOCOL_CAPABILITY_MAVLINK2">MAV_PROTOCOL_CAPABILITY_MAVLINK2</a> flag to verify MAVLink 2 support.</li><li><a href="../messages/common.html#PROTOCOL_VERSION">PROTOCOL_VERSION</a>.<code>version</code> contains the MAVLink version number multiplied by 100: v1.0 is 100, v2.3 is 203 etc.</li><li><a href="../messages/common.html#HEARTBEAT">HEARTBEAT</a><code>.mavlink_version</code> field contains the minor version number. This is the <code>&lt;version&gt;</code> field defined in the <a href="../messages/">Message Definitions</a> (<code>version</code> in <a href="../messages/common.html">common.xml</a> for dialects that depend on the common message set).</li><li><p>The major version can be determined from the packet start marker byte:</p><ul><li>MAVLink 1: <code>0xFE</code></li><li>MAVLink 2: <code>0xFD</code></li></ul><blockquote class="alert clearfix alert-info"><strong class="fa fa-2x fa-edit"></strong><p>A MAVLink library that does not support a protocol version will not recognise the protocol start marker; so no messages will even be detected (see <a href="serialization.html">Serialization</a>).</p></blockquote></li></ul><blockquote class="alert clearfix alert-success"><strong class="fa fa-2x fa-thumbs-o-up"></strong><p>While messages do not contain version information, an extra CRC is used to ensure that a library will only process compatible messages (see <a href="serialization.html">Serialization &gt; CRC_EXTRA</a>).</p></blockquote><h2 id="version_handshaking"><a href="#version_handshaking"class="plugin-anchor"name="version_handshaking"><i class="fa fa-link"aria-hidden="true"></i></a>Version Handshaking</h2><p>Support for <em>MAVLink 2</em> is indicated in the <a href="../messages/common.html#AUTOPILOT_VERSION">AUTOPILOT_VERSION</a> message by the <a href="../messages/common.html#MAV_PROTOCOL_CAPABILITY_MAVLINK2">MAV_PROTOCOL_CAPABILITY_MAVLINK2</a> flag.</p><p>This is sufficient if the communication link between autopilot and GCS is completely transparent. However, most communication links are not completely transparent as they either include routing or in case of fixed-length wireless implementations on packetization. In order to also test the link, the <em>MAVLink 2</em> handshake protocol sends a <em>MAVLink 2</em> frame to test the complete communication chain.</p><p>To do so, the GCS sends a <a href="../messages/common.html#COMMAND_LONG">COMMAND_LONG</a> or <a href="../messages/common.html#COMMAND_INT">COMMAND_INT</a> message with the command ID <a href="../messages/common.html#MAV_CMD_REQUEST_PROTOCOL_VERSION">MAV_CMD_REQUEST_PROTOCOL_VERSION</a>.</p><p>If the system supports <em>MAVLink 2</em> and the handshake it will respond with <a href="../messages/common.html#PROTOCOL_VERSION">PROTOCOL_VERSION</a> <strong>encoded as MAVLink 2 packet</strong>. If it does not support <em>MAVLink 2</em> it should <code>NACK</code> the command. The GCS should fall back to a timeout in case the command interface is not implemented properly.</p><p>The diagram below illustrates the complete sequence.</p><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtO1xuICAgIHBhcnRpY2lwYW50IEdDU1xuICAgIHBhcnRpY2lwYW50IERyb25lXG4gICAgR0NTLT4-RHJvbmU6IE1BVl9DTURfUkVRVUVTVF9QUk9UT0NPTF9WRVJTSU9OXG4gICAgR0NTLT4-R0NTOiBTdGFydCB0aW1lb3V0XG4gICAgRHJvbmUtPj5HQ1M6IFBST1RPQ09MX1ZFUlNJT04gaW4gTUFWTGluayAyIGZyYW1pbmdcbiAgICBHQ1MtPj5Ecm9uZTogSWYgQUNLOiBTd2l0Y2hlcyB0byBNQVZMaW5rIDJcbiAgICBEcm9uZS0-PkdDUzogU3dpdGNoZXMgdG8gTUFWTGluayAyIG9uIHJlY2VpdmUiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"target="_blank"><img alt="Mermaid sequence: Request protocol version"src="https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtO1xuICAgIHBhcnRpY2lwYW50IEdDU1xuICAgIHBhcnRpY2lwYW50IERyb25lXG4gICAgR0NTLT4-RHJvbmU6IE1BVl9DTURfUkVRVUVTVF9QUk9UT0NPTF9WRVJTSU9OXG4gICAgR0NTLT4-R0NTOiBTdGFydCB0aW1lb3V0XG4gICAgRHJvbmUtPj5HQ1M6IFBST1RPQ09MX1ZFUlNJT04gaW4gTUFWTGluayAyIGZyYW1pbmdcbiAgICBHQ1MtPj5Ecm9uZTogSWYgQUNLOiBTd2l0Y2hlcyB0byBNQVZMaW5rIDJcbiAgICBEcm9uZS0-PkdDUzogU3dpdGNoZXMgdG8gTUFWTGluayAyIG9uIHJlY2VpdmUiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"></a></p><h3 id="semi-transparent-legacy-radios"><a href="#semi-transparent-legacy-radios"class="plugin-anchor"name="semi-transparent-legacy-radios"><i class="fa fa-link"aria-hidden="true"></i></a>Semi-Transparent Legacy Radios</h3><p>Some popular legacy radios (e.g. the SiK radio series) operate in semi-transparent mode by injecting <a href="../messages/common.html#RADIO_STATUS">RADIO_STATUS</a> messages into the MAVLink message stream. Per MAVLink spec these should actually emit a heartbeat with the same system ID and a different component ID than the autopilot to be discoverable. However, an additional heartbeat could be an issue for deployed systems. Therefore these radios can alternatively confirm their <em>MAVLink 2</em> compliance by emitting <code>RADIO_STATUS</code> in v2 message format after receiving the first MAVLink v2 frame.</p><h2 id="versions-and-signing"><a href="#versions-and-signing"class="plugin-anchor"name="versions-and-signing"><i class="fa fa-link"aria-hidden="true"></i></a>Versions and Signing</h2><p>The supported MAVLink library implementations enable different MAVLink versions on a per-channel basis, where a <em>channel</em> refers to a particular link in/out of a MAVLink system or component (e.g. a serial port or UDP port).</p><p>As a result, all <a href="../services/heartbeat.html">connections</a> to other components over a particular channel must share the same MAVLink version. If a system is using signing, then all connections via the same channel must also be signing messages with the same key.</p><blockquote class="alert clearfix alert-info"><strong class="fa fa-2x fa-edit"></strong><p>A system cannot use a single channel to connect to signed MAVLink 2 systems, unsigned MAVLink 2 systems, and/or MAVLink 1 components.</p></blockquote><p>Currently most MAVLink networks are configured to use unsigned MAVLink 2 messages. MAVLink 1 is primarily used to allow autopilots to connect to legacy MAVLink peripherals, and this is done via a separate channel. Signed networks will need to use a further separate channel to connect to other signed systems.</p><p>The next section explains how a system/channel should negotiate the version to use.</p><h2 id="negotiating_versions"><a href="#negotiating_versions"class="plugin-anchor"name="negotiating_versions"><i class="fa fa-link"aria-hidden="true"></i></a>Negotiating Versions</h2><p>Vehicle and GCS implementations will support both <em>MAVLink 1</em> and <em>MAVLink 2</em> for quite some time. We would like most users to receive the benefit of <em>MAVLink 2</em>, while still supporting implementations that don&apos;t yet support <em>MAVLink 2</em>.</p><p>The following is meant to capture best practice for vehicle firmware and GCS authors:</p><ul><li>Vehicle implementations should have a way to enable/disable the sending of <em>MAVLink 2</em> messages. This should preferably be on a per-link (channel) basis to allow for some peripherals to be <em>MAVLink 1</em> while others are <em>MAVLink 2</em>. It is acceptable for this option to require a reboot of the flight controller to take effect.</li><li>If signing is enabled then the vehicle should immediately start sending <em>signed</em> <em>MAVLink 2</em> on startup.</li><li>If signing is not enabled and <em>MAVLink 2</em> is enabled then the vehicle may choose to start by sending <em>MAVLink 1</em> and switch to <em>MAVLink 2</em> on a link when it first receives a <em>MAVLink 2</em> message on the link.</li><li>Vehicles should set the <code>MAV_PROTOCOL_CAPABILITY_MAVLINK2</code> capability flag in the <code>AUTOPILOT_VERSION</code> message if <em>MAVLink 2</em> is available on a link. This should be set in the case where the link is currently sending <em>MAVLink 1</em> packets but <em>MAVLink 2</em> packets will be accepted and will cause a switch to <em>MAVLink 2</em>.</li><li>GCS implementations can choose to either automatically switch to <em>MAVLink 2</em> where available or to have a configuration option for <em>MAVLink 2</em>.</li><li>If the GCS chooses to use a configuration option then when the option is enabled it should send <em>MAVLink 2</em> on starting the link.</li><li>If the GCS chooses to use automatic switching then it should switch to sending <em>MAVLink 2</em> if either it receives a <em>MAVLink 2</em> message on the link or by asking for the <code>AUTOPILOT_VERSION</code> message to be sent and seeing the <code>MAV_PROTOCOL_CAPABILITY_MAVLINK2</code> flag is set.</li></ul></section></div><div class="search-results"><div class="has-results"><h1 class="search-results-title"><span class="search-results-count"></span> results matching "<span class="search-query"></span>"</h1><ul class="search-results-list"></ul></div><div class="no-results"><h1 class="search-results-title">No results matching "<span class="search-query"></span>"</h1></div></div></div></div></div></div></div><script>var gitbook=gitbook||[];gitbook.push(function(){gitbook.page.hasChanged({page:{title:"MAVLink Versions",level:"1.4.1",depth:2,next:{title:"MAVLink 2",level:"1.4.2",depth:2,path:"guide/mavlink_2.md",ref:"guide/mavlink_2.md",articles:[]},previous:{title:"Guide",level:"1.4",depth:1,path:"guide/README.md",ref:"guide/README.md",articles:[{title:"MAVLink Versions",level:"1.4.1",depth:2,path:"guide/mavlink_version.md",ref:"guide/mavlink_version.md",articles:[]},{title:"MAVLink 2",level:"1.4.2",depth:2,path:"guide/mavlink_2.md",ref:"guide/mavlink_2.md",articles:[]},{title:"Message Signing",level:"1.4.3",depth:2,path:"guide/message_signing.md",ref:"guide/message_signing.md",articles:[]},{title:"Serialization",level:"1.4.4",depth:2,path:"guide/serialization.md",ref:"guide/serialization.md",articles:[]},{title:"Routing",level:"1.4.5",depth:2,path:"guide/routing.md",ref:"guide/routing.md",articles:[]},{title:"General Telemetry",level:"1.4.6",depth:2,path:"guide/general_telemetry.md",ref:"guide/general_telemetry.md",articles:[]},{title:"Offboard Control",level:"1.4.7",depth:2,path:"guide/offboard_control.md",ref:"guide/offboard_control.md",articles:[]},{title:"File Formats",level:"1.4.8",depth:2,path:"file_formats/README.md",ref:"file_formats/README.md",articles:[]},{title:"UAVCAN Interaction",level:"1.4.9",depth:2,path:"guide/uavcan_interaction.md",ref:"guide/uavcan_interaction.md",articles:[]},{title:"Scripts",level:"1.4.10",depth:2,path:"guide/scripts.md",ref:"guide/scripts.md",articles:[]},{title:"MAVLink XML Schema",level:"1.4.11",depth:2,path:"guide/xml_schema.md",ref:"guide/xml_schema.md",articles:[]},{title:"Defining XML Enums/Messages",level:"1.4.12",depth:2,path:"guide/define_xml_element.md",ref:"guide/define_xml_element.md",articles:[]},{title:"MAVLink CRC",level:"1.4.13",depth:2,path:"guide/crc.md",ref:"guide/crc.md",articles:[]},{title:"Debugging with Wireshark",level:"1.4.14",depth:2,path:"guide/wireshark.md",ref:"guide/wireshark.md",articles:[]},{title:"Dialects",level:"1.4.15",depth:2,path:"messages/README.md",ref:"messages/README.md",articles:[{title:"ASLUAV.xml",level:"1.4.15.1",depth:3,path:"messages/ASLUAV.md",ref:"messages/ASLUAV.md",articles:[]},{title:"all.xml",level:"1.4.15.2",depth:3,path:"messages/all.md",ref:"messages/all.md",articles:[]},{title:"ardupilotmega.xml",level:"1.4.15.3",depth:3,path:"messages/ardupilotmega.md",ref:"messages/ardupilotmega.md",articles:[]},{title:"autoquad.xml",level:"1.4.15.4",depth:3,path:"messages/autoquad.md",ref:"messages/autoquad.md",articles:[]},{title:"development.xml",level:"1.4.15.5",depth:3,path:"messages/development.md",ref:"messages/development.md",articles:[]},{title:"icarous.xml",level:"1.4.15.6",depth:3,path:"messages/icarous.md",ref:"messages/icarous.md",articles:[]},{title:"matrixpilot.xml",level:"1.4.15.7",depth:3,path:"messages/matrixpilot.md",ref:"messages/matrixpilot.md",articles:[]},{title:"minimal.xml",level:"1.4.15.8",depth:3,path:"messages/minimal.md",ref:"messages/minimal.md",articles:[]},{title:"paparazzi.xml",level:"1.4.15.9",depth:3,path:"messages/paparazzi.md",ref:"messages/paparazzi.md",articles:[]},{title:"python_array_test.xml",level:"1.4.15.10",depth:3,path:"messages/python_array_test.md",ref:"messages/python_array_test.md",articles:[]},{title:"standard.xml",level:"1.4.15.11",depth:3,path:"messages/standard.md",ref:"messages/standard.md",articles:[]},{title:"test.xml",level:"1.4.15.12",depth:3,path:"messages/test.md",ref:"messages/test.md",articles:[]},{title:"uAvionix.xml",level:"1.4.15.13",depth:3,path:"messages/uAvionix.md",ref:"messages/uAvionix.md",articles:[]},{title:"ualberta.xml",level:"1.4.15.14",depth:3,path:"messages/ualberta.md",ref:"messages/ualberta.md",articles:[]}]}]},dir:"ltr"},config:{plugins:["theme-api","youtube","anchors","collapsible-menu","page-toc-button","language-picker","custom-favicon","richquotes@git+https://github.com/Dronecode/gitbook-plugin-richquotes.git","bulk-redirect@git+https://github.com/Dronecode/gitbook-plugin-bulk-redirect.git","toolbar@git+https://github.com/hamishwillee/gitbook-plugin-toolbar.git","-mermaid","theme-dronecode@git+https://github.com/dronecode/theme-dronecode.git","html-minifier"],styles:{website:"styles/website.css",pdf:"styles/pdf.css",epub:"styles/epub.css",mobi:"styles/mobi.css",ebook:"styles/ebook.css",print:"styles/print.css"},pluginsConfig:{"theme-dronecode":{logo:{logo_large:"../assets/site/logo_mavlink_header.png",logo_small:"../assets/site/logo_mavlink_header.png",url:"https://mavlink.io/en/"},menu:[{url:"https://mavlink.io/en/messages/common.html",text:"Messages",text_small:"Messages"},{url:"https://mavlink.io/en/about/faq.html",text:"FAQ",text_small:"FAQ"},{url:"https://mavlink.io/en/about/implementations.html",text:"Implementations",text_small:"Implementations"},{url:"https://mavlink.io/en/mavgen_c/examples.html",text:"Examples",text_small:"Examples"},{url:"https://mavlink.io/en/about/support.html",text:"Support",text_small:"Help"}]},"collapsible-menu":{},"language-picker":{"grid-columns":3},youtube:{},search:{},"html-minifier":{customAttrSurround:[],removeScriptTypeAttributes:!1,removeEmptyAttributes:!1,removeRedundantAttributes:!1,removeEmptyElements:!1,sortClassName:!0,caseSensitive:!0,html5:!0,collapseWhitespace:!0,processConditionalComments:!1,quoteCharacter:null,keepClosingSlash:!0,preventAttributesEscaping:!1,minifyURLs:!1,removeAttributeQuotes:!1,decodeEntities:!1,trimCustomFragments:!1,customAttrAssign:[],includeAutoGeneratedTags:!0,collapseInlineTagWhitespace:!1,collapseBooleanAttributes:!0,minifyJS:!0,removeTagWhitespace:!0,preserveLineBreaks:!1,sortAttributes:!0,removeStyleLinkTypeAttributes:!1,removeComments:!0,minifyCSS:!0,processScripts:[],conservativeCollapse:!1,removeOptionalTags:!1,useShortDoctype:!1},lunr:{maxIndexSize:1e6,ignoreSpecialCharacters:!1},fontsettings:{theme:"white",family:"sans",size:2},richquotes:{tip:{alert:"success",picto:"fa-thumbs-o-up"}},highlight:{},favicon:"favicon.ico","page-toc-button":{},"theme-api":{languages:[{lang:"c",name:"C/C++",default:!0},{lang:"python",name:"Python"},{lang:"js",name:"JavaScript"},{lang:"go",name:"Go"}],split:!0,theme:"light"},"bulk-redirect":{basepath:"/",redirectsFile:"redirects.json"},"custom-favicon":{},toolbar:{buttons:[{label:"Bug tracker",icon:"fa fa-bug",position:"left",url:"https://github.com/mavlink/mavlink-devguide/issues/new?title=Doc+Bug:+{{title}}&body=DESCRIBE+PROBLEM+WITH+DOCS+HERE%0A%0ABug+Page:+[{{title}}]({{url}})"},{label:"GitHub",icon:"fa fa-github",url:"https://github.com/mavlink/mavlink-devguide"},{label:"Edit page on github",icon:"fa fa-pencil-square-o",position:"left",url:"https://github.com/mavlink/mavlink-devguide/edit/master/{{filepath_lang}}"}]},sharing:{facebook:!0,twitter:!0,google:!1,weibo:!1,instapaper:!1,vk:!1,all:["facebook","google","twitter","weibo","instapaper"]},"theme-default":{styles:{website:"styles/website.css",pdf:"styles/pdf.css",epub:"styles/epub.css",mobi:"styles/mobi.css",ebook:"styles/ebook.css",print:"styles/print.css"},showLevel:!1},anchors:{}},theme:"default",pdf:{pageNumbers:!0,fontSize:12,fontFamily:"Arial",paperSize:"a4",chapterMark:"pagebreak",pageBreaksBefore:"/",margin:{right:62,left:62,top:56,bottom:56}},structure:{langs:"LANGS.md",readme:"README.md",glossary:"GLOSSARY.md",summary:"SUMMARY.md"},variables:{logo:"./assets/site/logo_mavlink_small.png"},title:"MAVLink Developer Guide",language:"en",gitbook:"*"},file:{path:"guide/mavlink_version.md",mtime:"2023-12-21T04:57:22.041Z",type:"markdown"},gitbook:{version:"3.2.3",time:"2023-12-21T04:58:11.199Z"},basePath:"..",book:{language:"en"}})})</script></div><script src="../../gitbook/gitbook.js"></script><script src="../../gitbook/theme.js"></script><script src="../../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script><script src="../../gitbook/gitbook-plugin-page-toc-button/plugin.js"></script><script src="../../gitbook/gitbook-plugin-language-picker/plugin.js"></script><script src="../../gitbook/gitbook-plugin-toolbar/buttons.js"></script><script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script><script src="../../gitbook/gitbook-plugin-search/search.js"></script><script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script><script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script><script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script><script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script><script src="../../gitbook/gitbook-plugin-theme-api/theme-api.js"></script></body></html>