<!DOCTYPE HTML><html lang="en"><head><meta charset="UTF-8"><meta content="text/html; charset=utf-8"http-equiv="Content-Type"><title>Debugging with Wireshark Â· MAVLink Developer Guide</title><meta content="IE=edge"http-equiv="X-UA-Compatible"/><meta content=""name="description"><meta content="GitBook 3.2.3"name="generator"><link href="../../gitbook/style.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-anchors/plugin.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-page-toc-button/plugin.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-language-picker/plugin.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-richquotes/plugin.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-highlight/website.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-search/search.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-fontsettings/website.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-theme-api/theme-api.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-theme-dronecode/theme_styles.css"rel="stylesheet"><meta content="true"name="HandheldFriendly"/><meta content="width=device-width,initial-scale=1,user-scalable=no"name="viewport"><meta content="yes"name="apple-mobile-web-app-capable"><meta content="black"name="apple-mobile-web-app-status-bar-style"><link href="../../gitbook/images/apple-touch-icon-precomposed-152.png"rel="apple-touch-icon-precomposed"sizes="152x152"><link href="../../gitbook/images/favicon.ico"rel="shortcut icon"type="image/x-icon"><link href="../messages/"rel="next"/><link href="crc.html"rel="prev"/></head><body><div id="common_dronecode_menu"><div class="large_version common_menu_logo"><a href="https://mavlink.io/en/"><img alt="Dronecode logo (large)"src="../../assets/site/logo_mavlink_header.png"/></a></div><div class="small_version common_menu_logo"><a href="https://mavlink.io/en/"><img alt="Dronecode logo (small)"src="../../assets/site/logo_mavlink_header.png"/></a></div><div class="common_menu_options"><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/messages/common.html">Messages</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/messages/common.html">Messages</a></div><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/about/faq.html">FAQ</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/about/faq.html">FAQ</a></div><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/about/implementations.html">Implementations</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/about/implementations.html">Implementations</a></div><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/mavgen_c/examples.html">Examples</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/mavgen_c/examples.html">Examples</a></div><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/about/support.html">Support</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/about/support.html">Help</a></div></div></div><div class="book"><div class="book-summary"><div id="book-search-input"role="search"><input placeholder="Type to search"type="text"/></div><nav role="navigation"><ul class="summary"><li class="chapter"data-level="1.1"data-path="../"><a href="../">Introduction</a><ul class="articles"><li class="chapter"data-level="1.1.1"data-path="../about/overview.html"><a href="../about/overview.html">Overview</a></li><li class="chapter"data-level="1.1.2"data-path="../about/faq.html"><a href="../about/faq.html">FAQ</a></li><li class="chapter"data-level="1.1.3"data-path="../about/implementations.html"><a href="../about/implementations.html">Implementations</a></li></ul></li><li class="chapter"data-level="1.2"data-path="../getting_started/"><a href="../getting_started/">Getting Started</a><ul class="articles"><li class="chapter"data-level="1.2.1"data-path="../getting_started/installation.html"><a href="../getting_started/installation.html">Install MAVLink</a></li><li class="chapter"data-level="1.2.2"data-path="../getting_started/generate_libraries.html"><a href="../getting_started/generate_libraries.html">Generate MAVLink Libraries</a></li><li class="chapter"data-level="1.2.3"data-path="../getting_started/ros.html"><a href="../getting_started/ros.html">Generate Source Files for ROS</a></li></ul></li><li class="chapter"data-level="1.3"data-path="../getting_started/use_libraries.html"><a href="../getting_started/use_libraries.html">Using MAVLink Libraries</a><ul class="articles"><li class="chapter"data-level="1.3.1"data-path="../mavgen_c/"><a href="../mavgen_c/">C (mavgen)</a><ul class="articles"><li class="chapter"data-level="1.3.1.1"data-path="../mavgen_c/message_signing_c.html"><a href="../mavgen_c/message_signing_c.html">Message Signing</a></li><li class="chapter"data-level="1.3.1.2"data-path="../mavgen_c/examples.html"><a href="../mavgen_c/examples.html">Examples</a><ul class="articles"><li class="chapter"data-level="1.3.1.2.1"data-path="../mavgen_c/example_c_uart.html"><a href="../mavgen_c/example_c_uart.html">UART Interface (C)</a></li><li class="chapter"data-level="1.3.1.2.2"data-path="../mavgen_c/example_c_udp.html"><a href="../mavgen_c/example_c_udp.html">UDP Example (C)</a></li></ul></li></ul></li><li class="chapter"data-level="1.3.2"data-path="../mavgen_python/"><a href="../mavgen_python/">Pymavlink (Python-mavgen)</a><ul class="articles"><li class="chapter"data-level="1.3.2.1"data-path="../mavgen_python/howto_requestmessages.html"><a href="../mavgen_python/howto_requestmessages.html">How to Request Messages/Set Message Rates</a></li><li class="chapter"data-level="1.3.2.2"data-path="../mavgen_python/message_signing.html"><a href="../mavgen_python/message_signing.html">Message Signing</a></li><li class="chapter"data-level="1.3.2.3"data-path="../mavgen_python/examples.html"><a href="../mavgen_python/examples.html">Examples</a></li></ul></li></ul></li><li class="chapter"data-level="1.4"data-path="./"><a href="./">Guide</a><ul class="articles"><li class="chapter"data-level="1.4.1"data-path="mavlink_version.html"><a href="mavlink_version.html">MAVLink Versions</a></li><li class="chapter"data-level="1.4.2"data-path="mavlink_2.html"><a href="mavlink_2.html">MAVLink 2</a></li><li class="chapter"data-level="1.4.3"data-path="message_signing.html"><a href="message_signing.html">Message Signing</a></li><li class="chapter"data-level="1.4.4"data-path="serialization.html"><a href="serialization.html">Serialization</a></li><li class="chapter"data-level="1.4.5"data-path="routing.html"><a href="routing.html">Routing</a></li><li class="chapter"data-level="1.4.6"data-path="redundancy_deduplication.html"><a href="redundancy_deduplication.html">Redundancy/Message De-duplication</a></li><li class="chapter"data-level="1.4.7"data-path="general_telemetry.html"><a href="general_telemetry.html">General Telemetry</a></li><li class="chapter"data-level="1.4.8"data-path="../file_formats/"><a href="../file_formats/">File Formats</a></li><li class="chapter"data-level="1.4.9"data-path="uavcan_interaction.html"><a href="uavcan_interaction.html">UAVCAN Interaction</a></li><li class="chapter"data-level="1.4.10"data-path="scripts.html"><a href="scripts.html">Scripts</a></li><li class="chapter"data-level="1.4.11"data-path="xml_schema.html"><a href="xml_schema.html">MAVLink XML Schema</a></li><li class="chapter"data-level="1.4.12"data-path="define_xml_element.html"><a href="define_xml_element.html">Defining XML Enums/Messages</a></li><li class="chapter"data-level="1.4.13"data-path="crc.html"><a href="crc.html">MAVLink CRC</a></li><li class="chapter active"data-level="1.4.14"data-path="wireshark.html"><a href="wireshark.html">Debugging with Wireshark</a></li><li class="chapter"data-level="1.4.15"data-path="../messages/"><a href="../messages/">Dialects</a><ul class="articles"><li class="chapter"data-level="1.4.15.1"data-path="../messages/ASLUAV.html"><a href="../messages/ASLUAV.html">ASLUAV.xml</a></li><li class="chapter"data-level="1.4.15.2"data-path="../messages/all.html"><a href="../messages/all.html">all.xml</a></li><li class="chapter"data-level="1.4.15.3"data-path="../messages/ardupilotmega.html"><a href="../messages/ardupilotmega.html">ardupilotmega.xml</a></li><li class="chapter"data-level="1.4.15.4"data-path="../messages/autoquad.html"><a href="../messages/autoquad.html">autoquad.xml</a></li><li class="chapter"data-level="1.4.15.5"data-path="../messages/development.html"><a href="../messages/development.html">development.xml</a></li><li class="chapter"data-level="1.4.15.6"data-path="../messages/icarous.html"><a href="../messages/icarous.html">icarous.xml</a></li><li class="chapter"data-level="1.4.15.7"data-path="../messages/matrixpilot.html"><a href="../messages/matrixpilot.html">matrixpilot.xml</a></li><li class="chapter"data-level="1.4.15.8"data-path="../messages/minimal.html"><a href="../messages/minimal.html">minimal.xml</a></li><li class="chapter"data-level="1.4.15.9"data-path="../messages/paparazzi.html"><a href="../messages/paparazzi.html">paparazzi.xml</a></li><li class="chapter"data-level="1.4.15.10"data-path="../messages/python_array_test.html"><a href="../messages/python_array_test.html">python_array_test.xml</a></li><li class="chapter"data-level="1.4.15.11"data-path="../messages/standard.html"><a href="../messages/standard.html">standard.xml</a></li><li class="chapter"data-level="1.4.15.12"data-path="../messages/test.html"><a href="../messages/test.html">test.xml</a></li><li class="chapter"data-level="1.4.15.13"data-path="../messages/uAvionix.html"><a href="../messages/uAvionix.html">uAvionix.xml</a></li><li class="chapter"data-level="1.4.15.14"data-path="../messages/ualberta.html"><a href="../messages/ualberta.html">ualberta.xml</a></li></ul></li></ul></li><li class="chapter"data-level="1.5"data-path="../messages/common.html"><a href="../messages/common.html">Messages (common)</a></li><li class="chapter"data-level="1.6"data-path="../services/"><a href="../services/">Microservices</a><ul class="articles"><li class="chapter"data-level="1.6.1"data-path="../services/heartbeat.html"><a href="../services/heartbeat.html">Heartbeat/Connection Protocol</a></li><li class="chapter"data-level="1.6.2"data-path="../services/mission.html"><a href="../services/mission.html">Mission Protocol</a></li><li class="chapter"data-level="1.6.3"data-path="../services/parameter.html"><a href="../services/parameter.html">Parameter Protocol</a></li><li class="chapter"data-level="1.6.4"data-path="../services/parameter_ext.html"><a href="../services/parameter_ext.html">Extended Parameter Protocol</a></li><li class="chapter"data-level="1.6.5"data-path="../services/command.html"><a href="../services/command.html">Command Protocol</a></li><li class="chapter"data-level="1.6.6"data-path="../services/manual_control.html"><a href="../services/manual_control.html">Manual Control (Joystick) Protocol</a></li><li class="chapter"data-level="1.6.7"data-path="../services/camera.html"><a href="../services/camera.html">Camera Protocol</a><ul class="articles"><li class="chapter"data-level="1.6.7.1"data-path="../services/camera_def.html"><a href="../services/camera_def.html">Camera Definition</a></li></ul></li><li class="chapter"data-level="1.6.8"data-path="../services/gimbal_v2.html"><a href="../services/gimbal_v2.html">Gimbal Protocol v2</a><ul class="articles"><li class="chapter"data-level="1.6.8.1"data-path="../services/gimbal.html"><a href="../services/gimbal.html">Gimbal Protocol v1 (superseded)</a></li></ul></li><li class="chapter"data-level="1.6.9"data-path="../services/arm_authorization.html"><a href="../services/arm_authorization.html">Arm Authorization Protocol</a></li><li class="chapter"data-level="1.6.10"data-path="../services/image_transmission.html"><a href="../services/image_transmission.html">Image Transmission Protocol</a></li><li class="chapter"data-level="1.6.11"data-path="../services/offboard_control.html"><a href="../services/offboard_control.html">Offboard Control Protocol</a></li><li class="chapter"data-level="1.6.12"data-path="../services/ftp.html"><a href="../services/ftp.html">File Transfer Protocol (FTP)</a></li><li class="chapter"data-level="1.6.13"data-path="../services/landing_target.html"><a href="../services/landing_target.html">Landing Target Protocol</a></li><li class="chapter"data-level="1.6.14"data-path="../services/ping.html"><a href="../services/ping.html">Ping Protocol</a></li><li class="chapter"data-level="1.6.15"data-path="../services/trajectory.html"><a href="../services/trajectory.html">Path Planning (Trajectory) Protocol</a></li><li class="chapter"data-level="1.6.16"data-path="../services/battery.html"><a href="../services/battery.html">Battery Protocol</a></li><li class="chapter"data-level="1.6.17"data-path="../services/terrain.html"><a href="../services/terrain.html">Terrain Protocol</a></li><li class="chapter"data-level="1.6.18"data-path="../services/tunnel.html"><a href="../services/tunnel.html">Tunnel Protocol</a></li><li class="chapter"data-level="1.6.19"data-path="../services/opendroneid.html"><a href="../services/opendroneid.html">Open Drone ID Protocol</a></li><li class="chapter"data-level="1.6.20"data-path="../services/high_latency.html"><a href="../services/high_latency.html">High Latency Protocol</a></li><li class="chapter"data-level="1.6.21"data-path="../services/component_information.html"><a href="../services/component_information.html">Component Metadata Protocol (WIP)</a></li><li class="chapter"data-level="1.6.22"data-path="../services/payload.html"><a href="../services/payload.html">Payload Protocols</a></li><li class="chapter"data-level="1.6.23"data-path="../services/traffic_management.html"><a href="../services/traffic_management.html">Traffic Managment (UTM/ADS-B)</a></li><li class="chapter"data-level="1.6.24"data-path="../services/events.html"><a href="../services/events.html">Events Interface (WIP)</a></li><li class="chapter"data-level="1.6.25"data-path="../services/timesync.html"><a href="../services/timesync.html">Time Synchronization</a></li></ul></li><li class="chapter"data-level="1.7"data-path="../contributing/contributing.html"><a href="../contributing/contributing.html">Contributing</a></li><li class="chapter"data-level="1.8"data-path="../about/support.html"><a href="../about/support.html">Support</a></li><li class="divider"></li><li><a href="https://www.gitbook.com"class="gitbook-link"target="blank">Published with GitBook</a></li></ul></nav></div><div class="book-body"><div class="body-inner"><div class="book-header"role="navigation"><h1><i class="fa fa-circle-o-notch fa-spin"></i> <a href="..">Debugging with Wireshark</a></h1></div><div class="page-wrapper"role="main"tabindex="-1"><div class="page-inner"><div id="book-search-results"><div class="search-noresults"><section class="markdown-section normal"><h1 id="parsing-mavlink-in-wireshark"><a href="#parsing-mavlink-in-wireshark"class="plugin-anchor"name="parsing-mavlink-in-wireshark"><i class="fa fa-link"aria-hidden="true"></i></a>Parsing MAVLink in Wireshark</h1><p><a href="https://www.wireshark.org/"target="_blank">Wireshark</a> is an extremely popular &quot;general purpose&quot; network protocol analyzer that can be used to inspect and analyse MAVLink traffic.</p><p>The benefits of using <em>Wireshark</em> over other alternatives are:</p><ul><li>it can view <em>all</em> traffic on a network interface (GCS tools like <a href="https://docs.qgroundcontrol.com/master/en/analyze_view/mavlink_inspector.html"target="_blank">MAVLink Inspector</a> often only analyse incoming traffic).</li><li>you can use it to analyse traffic logged on a companion computer (this allows analysis of traffic between the companion computer and flight controller, which might otherwise not be visible to <em>Wireshark</em>).</li><li>it is easy to update for new custom messages and dialects. Rebuilding <em>QGroundControl</em> so you can use it analyse custom messages is much harder!</li></ul><p>This topic shows how to generate a Wireshark plugin for a particular dialect file and install it on Wireshark, and how to perform basic filtering. It also provides an overview of how you can use <em>tcpdump</em> for collecting traffic on a linux computer (for later analysis).</p><blockquote class="alert alert-info clearfix"><strong class="fa fa-2x fa-edit"></strong><p>You will need to regenerate and reimport the plugin (as shown below) if your dialect changes.</p></blockquote><h2 id="generate-mavlink-lua-plugin-for-wireshark"><a href="#generate-mavlink-lua-plugin-for-wireshark"class="plugin-anchor"name="generate-mavlink-lua-plugin-for-wireshark"><i class="fa fa-link"aria-hidden="true"></i></a>Generate MAVLink Lua Plugin for Wireshark</h2><p>First you will need to generate a <em>Wireshark</em> plugin that includes definitions for the MAVLink messages that you want it to handle. The MAVLink generator (<strong>mavgen</strong>) can build this plugin for a dialect in the same way as it builds MAVLink libraries for other programming languages.</p><p>The steps are:</p><ol><li><a href="../getting_started/installation.html">Install MAVLink</a> (if you have not already done so).</li><li><p>Build libraries for your target dialect, specifing <code>WLua</code> as the target language. This process is described in the topic <a href="../getting_started/generate_libraries.html">Generate MAVLink Libraries</a>.</p><p>For example, to build the MAVLink 2 Wireshark plugin for <a href="../messages/common.html">common.xml</a> you might use the following command:</p><pre><code class="lang-bash">python3 -m pymavlink.tools.mavgen --lang=WLua --wire-protocol=2.0 --output=mavlink_2_common message_definitions/v1.0/common.xml
</code></pre><p>The plugin would be created in the current directory as: <strong>mavlink_2_common.lua</strong>.</p></li></ol><h2 id="update-plugin-with-correct-ports"><a href="#update-plugin-with-correct-ports"class="plugin-anchor"name="update-plugin-with-correct-ports"><i class="fa fa-link"aria-hidden="true"></i></a>Update Plugin with Correct Ports</h2><p>The last few lines of the plugin file specify the ports to be monitored.</p><pre><code>-- bind protocol dissector to port 14550 and 14580

local udp_dissector_table = DissectorTable.get(&quot;udp.port&quot;)
udp_dissector_table:add(14550, mavlink_proto)
udp_dissector_table:add(14580, mavlink_proto)
udp_dissector_table:add(18570, mavlink_proto)
</code></pre><p>These first two ports are the correct ports to monitor network traffic between a simulated autopilot and a GCS and offboard API. The final port (18570) can be used to monitor a simulation running in WSL2.</p><p>If you want to monitor other interfaces then you can modify or add to these lines and then save the plugin file. This might be necessary, for example, in order to monitor traffic recorded on the interface between a companion computer and a flight controller.</p><h2 id="import-lua-plugin-into-wireshark"><a href="#import-lua-plugin-into-wireshark"class="plugin-anchor"name="import-lua-plugin-into-wireshark"><i class="fa fa-link"aria-hidden="true"></i></a>Import Lua Plugin into WireShark</h2><p>To import the plugin into <em>Wireshark</em>:</p><ol><li>Copy the plugin file into the wireshare plugins directory.<ul><li>On Linux systems this might be: <code>~/.local/lib/wireshark/plugins</code> (or <code>~/.wireshark/plugins</code> for older versions of Wireshark). Note that users will need to be added to the <code>wireshark</code> group to use the tool.)</li><li>On Windows this might be: <code>Program Files/Wireshark/plugins</code>.</li></ul></li><li><p>Open <em>Wireshark</em> and follow the menu: <strong>Help &gt; About Wireshark &gt; Plugins</strong></p><p>You should find the plugin in the list. For example, with the plugin created in the previous section you would see <code>mavlink_2_common.lua</code></p></li></ol><h2 id="view-traffic-on-wireshark"><a href="#view-traffic-on-wireshark"class="plugin-anchor"name="view-traffic-on-wireshark"><i class="fa fa-link"aria-hidden="true"></i></a>View Traffic on Wireshark</h2><p>Wireshark can inspect any interface on the host computer on which it is running. So you can use it to inspect traffic between a GCS and running on the same computer and a real or simulated computer.</p><p>For example assuming you have a simulator and ground station running on the same computer, select the <strong>Adapter for loopback traffic capture</strong>.</p><p><img alt="Wireshark: Select loopback adapter"src="../../assets/wireshark/select_loopback_adapter.jpg"></p><p>This will display all traffic on the interface. With the MAVLink WLua plugin installed, MAVLink message names are displayed next to each UDP packet that contains a MAVLink message.</p><p><img alt="Wireshark: Live unfiltered traffic"src="../../assets/wireshark/live_output_all.jpg"></p><p>You can filter to show <em>just</em> the MAVLink traffic using <code>mavlink_proto</code> in the filter box (below we also filter on <code>not icmp</code> to remove additional control packets).</p><p><img alt="Wireshark: Live traffic filtered to show only MAVLink packets"src="../../assets/wireshark/live_output_filtered.jpg"></p><p>Click on a particular message to find out its details. Below you can see the payload and the header details for an <code>ATTITUDE_TARGET</code> message:</p><p><img alt="Wireshark: Packet details"src="../../assets/wireshark/mavlink_message_details.jpg"></p><h2 id="filtering-using-mavlink-properties"><a href="#filtering-using-mavlink-properties"class="plugin-anchor"name="filtering-using-mavlink-properties"><i class="fa fa-link"aria-hidden="true"></i></a>Filtering using MAVLink Properties</h2><p>In addition to using filters for the usual <em>Wireshark</em> things (e.g. ips and ports) you can also use the new MAVLink filters.</p><blockquote class="alert alert-info clearfix"><strong class="fa fa-2x fa-edit"></strong><p>This works the same way for live view and for a <em>pcapng</em> file loaded into <em>Wireshark</em></p></blockquote><p>We already saw you can filter for MAVLink packets using <code>mavlink_proto</code>. The following is a filter example:</p><pre><code>mavlink_proto.msgid==0 &amp;&amp; mavlink_proto.compid == 1 &amp;&amp;
(ip.addr == 10.0.115.155 &amp;&amp; ip.dst == 10.0.115.141)
</code></pre><p>This means to filter for:</p><ul><li>Mavlink msgid=<code>HEARTBEAT</code></li><li>Mavlink src compid=<code>AUTOPILOT</code></li><li>src IP=<code>10.0.115.155</code></li><li>dst IP=<code>10.0.115.141</code></li></ul><h2 id="capture-mavlink-stream"><a href="#capture-mavlink-stream"class="plugin-anchor"name="capture-mavlink-stream"><i class="fa fa-link"aria-hidden="true"></i></a>Capture MAVLink Stream</h2><p>On Linux you can use <em>tcpdump</em> to capture stream on a specific interface. This can be performed either on your laptop or on the offboard computer:</p><pre><code>apt update
apt install tcpdump
tcpdump -i eth0 -w mavlink-capture.pcap
</code></pre><h2 id="capture-tcpdump-mavlink-data-live-from-a-remote-machine-on-a-local-wireshark"><a href="#capture-tcpdump-mavlink-data-live-from-a-remote-machine-on-a-local-wireshark"class="plugin-anchor"name="capture-tcpdump-mavlink-data-live-from-a-remote-machine-on-a-local-wireshark"><i class="fa fa-link"aria-hidden="true"></i></a>Capture tcpdump (MAVLink) data live from a remote machine on a local WireShark</h2><p><code>tcpdump</code> must be installed on the remote machine.</p><p>When you can access the remote machine with SSH you can stream the tcpdump to your local machine instead of logging it to a file. <em>Wireshark</em> can open this stream and show the decoded MAVLink messages using the tools and filters from above.</p><pre><code>mkfifo /tmp/mavlink;
wireshark -k -i /tmp/mavlink &amp;
ssh root@10.41.1.1 -p 33333 &quot;tcpdump -s 0 -U -n -w - -i lo not port 33333&quot; &gt; /tmp/mavlink;
</code></pre><blockquote class="alert alert-info clearfix"><strong class="fa fa-2x fa-edit"></strong><p>Username, IP and port above have to be adjusted to the configuration on the remote machine.</p></blockquote><ol><li><code>mkfifo /tmp/mavlink</code> Creates a named pipe that is used to stream the data.</li><li><code>wireshark -k -i /tmp/mavlink &amp;</code> Start <em>Wireshark</em>, open the named pipe as input and start the capture immediately.</li><li><p>Start the data stream on the remote machine and pipe it into the named pipe on your local machine.</p><ul><li><code>-s 0</code> Set snapshot length to default</li><li><code>-U</code> Stream packet output packet-buffered, don&#x2019;t wait for a full buffer</li><li><code>-n</code> Don&apos;t convert addresses (i.e., host addresses, port numbers, etc.) to names</li><li><code>-w -</code> Write raw data to standard output (piped to the local machine)</li><li><code>-i lo</code> Define which interface to listen on. This will listen to the loopback interface, you can change this to the Ethernet, USB or modem interface.</li><li><code>not port 33333</code> Don&#x2019;t capture the data created by the SSH session. You can add more filters to tcpdump to reduce the streamed data.</li></ul></li></ol><h2 id="measuring-mavlink-data-rates-using-wireshark"><a href="#measuring-mavlink-data-rates-using-wireshark"class="plugin-anchor"name="measuring-mavlink-data-rates-using-wireshark"><i class="fa fa-link"aria-hidden="true"></i></a>Measuring MAVLink data rates using Wireshark</h2><p>After the plugin is setup in Wireshark ad you have started to capture a stream you can use the Wireshark IO graphsto monitor message rates for either the whole stream or just specific messages.</p><p>To do this you need to go to <strong>Statistics &gt; I/O Graphs</strong> and you will get a new window. Now you will a plot of the data rate of all packets you are analyzing. You can filter for the usual <em>Wireshark</em> filters and the new MAVLink ones introduced by the LUA script.</p><p>We recommend changing the y axis to bits or bytes and to reduce the x axis to 10ms or faster to get meaningful plots.</p></section></div><div class="search-results"><div class="has-results"><h1 class="search-results-title"><span class="search-results-count"></span> results matching "<span class="search-query"></span>"</h1><ul class="search-results-list"></ul></div><div class="no-results"><h1 class="search-results-title">No results matching "<span class="search-query"></span>"</h1></div></div></div></div></div></div></div><script>var gitbook=gitbook||[];gitbook.push(function(){gitbook.page.hasChanged({page:{title:"Debugging with Wireshark",level:"1.4.14",depth:2,next:{title:"Dialects",level:"1.4.15",depth:2,path:"messages/README.md",ref:"messages/README.md",articles:[{title:"ASLUAV.xml",level:"1.4.15.1",depth:3,path:"messages/ASLUAV.md",ref:"messages/ASLUAV.md",articles:[]},{title:"all.xml",level:"1.4.15.2",depth:3,path:"messages/all.md",ref:"messages/all.md",articles:[]},{title:"ardupilotmega.xml",level:"1.4.15.3",depth:3,path:"messages/ardupilotmega.md",ref:"messages/ardupilotmega.md",articles:[]},{title:"autoquad.xml",level:"1.4.15.4",depth:3,path:"messages/autoquad.md",ref:"messages/autoquad.md",articles:[]},{title:"development.xml",level:"1.4.15.5",depth:3,path:"messages/development.md",ref:"messages/development.md",articles:[]},{title:"icarous.xml",level:"1.4.15.6",depth:3,path:"messages/icarous.md",ref:"messages/icarous.md",articles:[]},{title:"matrixpilot.xml",level:"1.4.15.7",depth:3,path:"messages/matrixpilot.md",ref:"messages/matrixpilot.md",articles:[]},{title:"minimal.xml",level:"1.4.15.8",depth:3,path:"messages/minimal.md",ref:"messages/minimal.md",articles:[]},{title:"paparazzi.xml",level:"1.4.15.9",depth:3,path:"messages/paparazzi.md",ref:"messages/paparazzi.md",articles:[]},{title:"python_array_test.xml",level:"1.4.15.10",depth:3,path:"messages/python_array_test.md",ref:"messages/python_array_test.md",articles:[]},{title:"standard.xml",level:"1.4.15.11",depth:3,path:"messages/standard.md",ref:"messages/standard.md",articles:[]},{title:"test.xml",level:"1.4.15.12",depth:3,path:"messages/test.md",ref:"messages/test.md",articles:[]},{title:"uAvionix.xml",level:"1.4.15.13",depth:3,path:"messages/uAvionix.md",ref:"messages/uAvionix.md",articles:[]},{title:"ualberta.xml",level:"1.4.15.14",depth:3,path:"messages/ualberta.md",ref:"messages/ualberta.md",articles:[]}]},previous:{title:"MAVLink CRC",level:"1.4.13",depth:2,path:"guide/crc.md",ref:"guide/crc.md",articles:[]},dir:"ltr"},config:{plugins:["theme-api","youtube","anchors","collapsible-menu","page-toc-button","language-picker","custom-favicon","richquotes@git+https://github.com/Dronecode/gitbook-plugin-richquotes.git","bulk-redirect@git+https://github.com/Dronecode/gitbook-plugin-bulk-redirect.git","toolbar@git+https://github.com/hamishwillee/gitbook-plugin-toolbar.git","-mermaid","theme-dronecode@git+https://github.com/dronecode/theme-dronecode.git","html-minifier"],styles:{website:"styles/website.css",pdf:"styles/pdf.css",epub:"styles/epub.css",mobi:"styles/mobi.css",ebook:"styles/ebook.css",print:"styles/print.css"},pluginsConfig:{"theme-dronecode":{logo:{logo_large:"../assets/site/logo_mavlink_header.png",logo_small:"../assets/site/logo_mavlink_header.png",url:"https://mavlink.io/en/"},menu:[{url:"https://mavlink.io/en/messages/common.html",text:"Messages",text_small:"Messages"},{url:"https://mavlink.io/en/about/faq.html",text:"FAQ",text_small:"FAQ"},{url:"https://mavlink.io/en/about/implementations.html",text:"Implementations",text_small:"Implementations"},{url:"https://mavlink.io/en/mavgen_c/examples.html",text:"Examples",text_small:"Examples"},{url:"https://mavlink.io/en/about/support.html",text:"Support",text_small:"Help"}]},"collapsible-menu":{},"language-picker":{"grid-columns":3},youtube:{},search:{},"html-minifier":{customAttrSurround:[],removeScriptTypeAttributes:!1,removeEmptyAttributes:!1,removeRedundantAttributes:!1,removeEmptyElements:!1,sortClassName:!0,caseSensitive:!0,html5:!0,collapseWhitespace:!0,processConditionalComments:!1,quoteCharacter:null,keepClosingSlash:!0,preventAttributesEscaping:!1,minifyURLs:!1,removeAttributeQuotes:!1,decodeEntities:!1,trimCustomFragments:!1,customAttrAssign:[],includeAutoGeneratedTags:!0,collapseInlineTagWhitespace:!1,collapseBooleanAttributes:!0,minifyJS:!0,removeTagWhitespace:!0,preserveLineBreaks:!1,sortAttributes:!0,removeStyleLinkTypeAttributes:!1,removeComments:!0,minifyCSS:!0,processScripts:[],conservativeCollapse:!1,removeOptionalTags:!1,useShortDoctype:!1},lunr:{maxIndexSize:1e6,ignoreSpecialCharacters:!1},fontsettings:{theme:"white",family:"sans",size:2},richquotes:{tip:{alert:"success",picto:"fa-thumbs-o-up"}},highlight:{},favicon:"favicon.ico","page-toc-button":{},"theme-api":{languages:[{lang:"c",name:"C/C++",default:!0},{lang:"python",name:"Python"},{lang:"js",name:"JavaScript"},{lang:"go",name:"Go"}],split:!0,theme:"light"},"bulk-redirect":{basepath:"/",redirectsFile:"redirects.json"},"custom-favicon":{},toolbar:{buttons:[{label:"Bug tracker",icon:"fa fa-bug",position:"left",url:"https://github.com/mavlink/mavlink-devguide/issues/new?title=Doc+Bug:+{{title}}&body=DESCRIBE+PROBLEM+WITH+DOCS+HERE%0A%0ABug+Page:+[{{title}}]({{url}})"},{label:"GitHub",icon:"fa fa-github",url:"https://github.com/mavlink/mavlink-devguide"},{label:"Edit page on github",icon:"fa fa-pencil-square-o",position:"left",url:"https://github.com/mavlink/mavlink-devguide/edit/master/{{filepath_lang}}"}]},sharing:{facebook:!0,twitter:!0,google:!1,weibo:!1,instapaper:!1,vk:!1,all:["facebook","google","twitter","weibo","instapaper"]},"theme-default":{styles:{website:"styles/website.css",pdf:"styles/pdf.css",epub:"styles/epub.css",mobi:"styles/mobi.css",ebook:"styles/ebook.css",print:"styles/print.css"},showLevel:!1},anchors:{}},theme:"default",pdf:{pageNumbers:!0,fontSize:12,fontFamily:"Arial",paperSize:"a4",chapterMark:"pagebreak",pageBreaksBefore:"/",margin:{right:62,left:62,top:56,bottom:56}},structure:{langs:"LANGS.md",readme:"README.md",glossary:"GLOSSARY.md",summary:"SUMMARY.md"},variables:{logo:"./assets/site/logo_mavlink_small.png"},title:"MAVLink Developer Guide",language:"en",gitbook:"*"},file:{path:"guide/wireshark.md",mtime:"2024-04-04T00:24:13.362Z",type:"markdown"},gitbook:{version:"3.2.3",time:"2024-04-04T00:25:04.862Z"},basePath:"..",book:{language:"en"}})})</script></div><script src="../../gitbook/gitbook.js"></script><script src="../../gitbook/theme.js"></script><script src="../../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script><script src="../../gitbook/gitbook-plugin-page-toc-button/plugin.js"></script><script src="../../gitbook/gitbook-plugin-language-picker/plugin.js"></script><script src="../../gitbook/gitbook-plugin-toolbar/buttons.js"></script><script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script><script src="../../gitbook/gitbook-plugin-search/search.js"></script><script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script><script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script><script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script><script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script><script src="../../gitbook/gitbook-plugin-theme-api/theme-api.js"></script></body></html>