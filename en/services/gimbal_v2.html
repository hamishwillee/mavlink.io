<!DOCTYPE HTML><html lang="en"><head><meta charset="UTF-8"><meta content="text/html; charset=utf-8"http-equiv="Content-Type"><title>Gimbal Protocol v2 Â· MAVLink Developer Guide</title><meta content="IE=edge"http-equiv="X-UA-Compatible"/><meta content=""name="description"><meta content="GitBook 3.2.3"name="generator"><link href="../../gitbook/style.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-anchors/plugin.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-page-toc-button/plugin.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-language-picker/plugin.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-richquotes/plugin.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-highlight/website.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-search/search.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-fontsettings/website.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-theme-api/theme-api.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-theme-dronecode/theme_styles.css"rel="stylesheet"><meta content="true"name="HandheldFriendly"/><meta content="width=device-width,initial-scale=1,user-scalable=no"name="viewport"><meta content="yes"name="apple-mobile-web-app-capable"><meta content="black"name="apple-mobile-web-app-status-bar-style"><link href="../../gitbook/images/apple-touch-icon-precomposed-152.png"rel="apple-touch-icon-precomposed"sizes="152x152"><link href="../../gitbook/images/favicon.ico"rel="shortcut icon"type="image/x-icon"><link href="gimbal.html"rel="next"/><link href="camera_v1.html"rel="prev"/></head><body><div id="common_dronecode_menu"><div class="large_version common_menu_logo"><a href="https://mavlink.io/en/"><img alt="Dronecode logo (large)"src="../../assets/site/logo_mavlink_header.png"/></a></div><div class="small_version common_menu_logo"><a href="https://mavlink.io/en/"><img alt="Dronecode logo (small)"src="../../assets/site/logo_mavlink_header.png"/></a></div><div class="common_menu_options"><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/messages/common.html">Messages</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/messages/common.html">Messages</a></div><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/about/faq.html">FAQ</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/about/faq.html">FAQ</a></div><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/about/implementations.html">Implementations</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/about/implementations.html">Implementations</a></div><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/mavgen_c/examples.html">Examples</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/mavgen_c/examples.html">Examples</a></div><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/about/support.html">Support</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/about/support.html">Help</a></div></div></div><div class="book"><div class="book-summary"><div id="book-search-input"role="search"><input placeholder="Type to search"type="text"/></div><nav role="navigation"><ul class="summary"><li class="chapter"data-level="1.1"data-path="../"><a href="../">Introduction</a><ul class="articles"><li class="chapter"data-level="1.1.1"data-path="../about/overview.html"><a href="../about/overview.html">Overview</a></li><li class="chapter"data-level="1.1.2"data-path="../about/faq.html"><a href="../about/faq.html">FAQ</a></li><li class="chapter"data-level="1.1.3"data-path="../about/implementations.html"><a href="../about/implementations.html">Implementations</a></li></ul></li><li class="chapter"data-level="1.2"data-path="../getting_started/"><a href="../getting_started/">Getting Started</a><ul class="articles"><li class="chapter"data-level="1.2.1"data-path="../getting_started/installation.html"><a href="../getting_started/installation.html">Install MAVLink</a></li><li class="chapter"data-level="1.2.2"data-path="../getting_started/generate_libraries.html"><a href="../getting_started/generate_libraries.html">Generate MAVLink Libraries</a></li><li class="chapter"data-level="1.2.3"data-path="../getting_started/ros.html"><a href="../getting_started/ros.html">Generate Source Files for ROS</a></li></ul></li><li class="chapter"data-level="1.3"data-path="../getting_started/use_libraries.html"><a href="../getting_started/use_libraries.html">Using MAVLink Libraries</a><ul class="articles"><li class="chapter"data-level="1.3.1"data-path="../mavgen_c/"><a href="../mavgen_c/">C (mavgen)</a><ul class="articles"><li class="chapter"data-level="1.3.1.1"data-path="../mavgen_c/message_signing_c.html"><a href="../mavgen_c/message_signing_c.html">Message Signing</a></li><li class="chapter"data-level="1.3.1.2"data-path="../mavgen_c/examples.html"><a href="../mavgen_c/examples.html">Examples</a><ul class="articles"><li class="chapter"data-level="1.3.1.2.1"data-path="../mavgen_c/example_c_uart.html"><a href="../mavgen_c/example_c_uart.html">UART Interface (C)</a></li><li class="chapter"data-level="1.3.1.2.2"data-path="../mavgen_c/example_c_udp.html"><a href="../mavgen_c/example_c_udp.html">UDP Example (C)</a></li></ul></li></ul></li><li class="chapter"data-level="1.3.2"data-path="../mavgen_python/"><a href="../mavgen_python/">Pymavlink (Python-mavgen)</a><ul class="articles"><li class="chapter"data-level="1.3.2.1"data-path="../mavgen_python/howto_requestmessages.html"><a href="../mavgen_python/howto_requestmessages.html">How to Request Messages/Set Message Rates</a></li><li class="chapter"data-level="1.3.2.2"data-path="../mavgen_python/message_signing.html"><a href="../mavgen_python/message_signing.html">Message Signing</a></li><li class="chapter"data-level="1.3.2.3"data-path="../mavgen_python/examples.html"><a href="../mavgen_python/examples.html">Examples</a></li></ul></li></ul></li><li class="chapter"data-level="1.4"data-path="../guide/"><a href="../guide/">Guide</a><ul class="articles"><li class="chapter"data-level="1.4.1"data-path="../guide/mavlink_version.html"><a href="../guide/mavlink_version.html">MAVLink Versions</a></li><li class="chapter"data-level="1.4.2"data-path="../guide/mavlink_2.html"><a href="../guide/mavlink_2.html">MAVLink 2</a></li><li class="chapter"data-level="1.4.3"data-path="../guide/message_signing.html"><a href="../guide/message_signing.html">Message Signing</a></li><li class="chapter"data-level="1.4.4"data-path="../guide/serialization.html"><a href="../guide/serialization.html">Serialization</a></li><li class="chapter"data-level="1.4.5"data-path="../guide/routing.html"><a href="../guide/routing.html">Routing</a></li><li class="chapter"data-level="1.4.6"data-path="../guide/redundancy_deduplication.html"><a href="../guide/redundancy_deduplication.html">Redundancy/Message De-duplication</a></li><li class="chapter"data-level="1.4.7"data-path="../guide/packet_loss.html"><a href="../guide/packet_loss.html">Packet Loss Calculation</a></li><li class="chapter"data-level="1.4.8"data-path="../guide/general_telemetry.html"><a href="../guide/general_telemetry.html">General Telemetry</a></li><li class="chapter"data-level="1.4.9"data-path="../file_formats/"><a href="../file_formats/">File Formats</a></li><li class="chapter"data-level="1.4.10"data-path="../guide/uavcan_interaction.html"><a href="../guide/uavcan_interaction.html">UAVCAN Interaction</a></li><li class="chapter"data-level="1.4.11"data-path="../guide/scripts.html"><a href="../guide/scripts.html">Scripts</a></li><li class="chapter"data-level="1.4.12"data-path="../guide/xml_schema.html"><a href="../guide/xml_schema.html">MAVLink XML Schema</a></li><li class="chapter"data-level="1.4.13"data-path="../guide/define_xml_element.html"><a href="../guide/define_xml_element.html">Defining XML Enums/Messages</a></li><li class="chapter"data-level="1.4.14"data-path="../guide/crc.html"><a href="../guide/crc.html">MAVLink CRC</a></li><li class="chapter"data-level="1.4.15"data-path="../guide/wireshark.html"><a href="../guide/wireshark.html">Debugging with Wireshark</a></li><li class="chapter"data-level="1.4.16"data-path="../messages/"><a href="../messages/">Dialects</a><ul class="articles"><li class="chapter"data-level="1.4.16.1"data-path="../messages/ASLUAV.html"><a href="../messages/ASLUAV.html">ASLUAV.xml</a></li><li class="chapter"data-level="1.4.16.2"data-path="../messages/all.html"><a href="../messages/all.html">all.xml</a></li><li class="chapter"data-level="1.4.16.3"data-path="../messages/ardupilotmega.html"><a href="../messages/ardupilotmega.html">ardupilotmega.xml</a></li><li class="chapter"data-level="1.4.16.4"data-path="../messages/development.html"><a href="../messages/development.html">development.xml</a></li><li class="chapter"data-level="1.4.16.5"data-path="../messages/icarous.html"><a href="../messages/icarous.html">icarous.xml</a></li><li class="chapter"data-level="1.4.16.6"data-path="../messages/matrixpilot.html"><a href="../messages/matrixpilot.html">matrixpilot.xml</a></li><li class="chapter"data-level="1.4.16.7"data-path="../messages/minimal.html"><a href="../messages/minimal.html">minimal.xml</a></li><li class="chapter"data-level="1.4.16.8"data-path="../messages/paparazzi.html"><a href="../messages/paparazzi.html">paparazzi.xml</a></li><li class="chapter"data-level="1.4.16.9"data-path="../messages/python_array_test.html"><a href="../messages/python_array_test.html">python_array_test.xml</a></li><li class="chapter"data-level="1.4.16.10"data-path="../messages/standard.html"><a href="../messages/standard.html">standard.xml</a></li><li class="chapter"data-level="1.4.16.11"data-path="../messages/test.html"><a href="../messages/test.html">test.xml</a></li><li class="chapter"data-level="1.4.16.12"data-path="../messages/uAvionix.html"><a href="../messages/uAvionix.html">uAvionix.xml</a></li><li class="chapter"data-level="1.4.16.13"data-path="../messages/ualberta.html"><a href="../messages/ualberta.html">ualberta.xml</a></li></ul></li></ul></li><li class="chapter"data-level="1.5"data-path="../messages/common.html"><a href="../messages/common.html">Messages (common)</a></li><li class="chapter"data-level="1.6"data-path="./"><a href="./">Microservices</a><ul class="articles"><li class="chapter"data-level="1.6.1"data-path="heartbeat.html"><a href="heartbeat.html">Heartbeat/Connection Protocol</a></li><li class="chapter"data-level="1.6.2"data-path="mission.html"><a href="mission.html">Mission Protocol</a></li><li class="chapter"data-level="1.6.3"data-path="parameter.html"><a href="parameter.html">Parameter Protocol</a></li><li class="chapter"data-level="1.6.4"data-path="parameter_ext.html"><a href="parameter_ext.html">Extended Parameter Protocol</a></li><li class="chapter"data-level="1.6.5"data-path="command.html"><a href="command.html">Command Protocol</a></li><li class="chapter"data-level="1.6.6"data-path="manual_control.html"><a href="manual_control.html">Manual Control (Joystick) Protocol</a></li><li class="chapter"data-level="1.6.7"data-path="camera.html"><a href="camera.html">Camera Protocol v2</a><ul class="articles"><li class="chapter"data-level="1.6.7.1"data-path="camera_def.html"><a href="camera_def.html">Camera Definition Files</a></li></ul></li><li class="chapter"data-level="1.6.8"data-path="camera_v1.html"><a href="camera_v1.html">Camera Protocol v1 (Simple Trigger Protocol)</a></li><li class="chapter active"data-level="1.6.9"data-path="gimbal_v2.html"><a href="gimbal_v2.html">Gimbal Protocol v2</a><ul class="articles"><li class="chapter"data-level="1.6.9.1"data-path="gimbal.html"><a href="gimbal.html">Gimbal Protocol v1 (superseded)</a></li></ul></li><li class="chapter"data-level="1.6.10"data-path="arm_authorization.html"><a href="arm_authorization.html">Arm Authorization Protocol</a></li><li class="chapter"data-level="1.6.11"data-path="illuminator.html"><a href="illuminator.html">Illuminator Protocol</a></li><li class="chapter"data-level="1.6.12"data-path="image_transmission.html"><a href="image_transmission.html">Image Transmission Protocol</a></li><li class="chapter"data-level="1.6.13"data-path="offboard_control.html"><a href="offboard_control.html">Offboard Control Protocol</a></li><li class="chapter"data-level="1.6.14"data-path="ftp.html"><a href="ftp.html">File Transfer Protocol (FTP)</a></li><li class="chapter"data-level="1.6.15"data-path="landing_target.html"><a href="landing_target.html">Landing Target Protocol</a></li><li class="chapter"data-level="1.6.16"data-path="ping.html"><a href="ping.html">Ping Protocol</a></li><li class="chapter"data-level="1.6.17"data-path="trajectory.html"><a href="trajectory.html">Path Planning (Trajectory) Protocol</a></li><li class="chapter"data-level="1.6.18"data-path="battery.html"><a href="battery.html">Battery Protocol</a></li><li class="chapter"data-level="1.6.19"data-path="terrain.html"><a href="terrain.html">Terrain Protocol</a></li><li class="chapter"data-level="1.6.20"data-path="tunnel.html"><a href="tunnel.html">Tunnel Protocol</a></li><li class="chapter"data-level="1.6.21"data-path="opendroneid.html"><a href="opendroneid.html">Open Drone ID Protocol</a></li><li class="chapter"data-level="1.6.22"data-path="high_latency.html"><a href="high_latency.html">High Latency Protocol</a></li><li class="chapter"data-level="1.6.23"data-path="component_information.html"><a href="component_information.html">Component Metadata Protocol (WIP)</a></li><li class="chapter"data-level="1.6.24"data-path="mavlink_id_assignment.html"><a href="mavlink_id_assignment.html">MAVLink Id Assignment (sysid, compid)</a></li><li class="chapter"data-level="1.6.25"data-path="payload.html"><a href="payload.html">Payload Protocols</a></li><li class="chapter"data-level="1.6.26"data-path="traffic_management.html"><a href="traffic_management.html">Traffic Management (UTM/ADS-B)</a></li><li class="chapter"data-level="1.6.27"data-path="events.html"><a href="events.html">Events Interface (WIP)</a></li><li class="chapter"data-level="1.6.28"data-path="timesync.html"><a href="timesync.html">Time Synchronization</a></li></ul></li><li class="chapter"data-level="1.7"data-path="../contributing/contributing.html"><a href="../contributing/contributing.html">Contributing</a></li><li class="chapter"data-level="1.8"data-path="../about/support.html"><a href="../about/support.html">Support</a></li><li class="divider"></li><li><a href="https://www.gitbook.com"class="gitbook-link"target="blank">Published with GitBook</a></li></ul></nav></div><div class="book-body"><div class="body-inner"><div class="book-header"role="navigation"><h1><i class="fa fa-circle-o-notch fa-spin"></i> <a href="..">Gimbal Protocol v2</a></h1></div><div class="page-wrapper"role="main"tabindex="-1"><div class="page-inner"><div id="book-search-results"><div class="search-noresults"><section class="markdown-section normal"><h1 id="gimbal-protocol-v2"><a href="#gimbal-protocol-v2"class="plugin-anchor"name="gimbal-protocol-v2"><i class="fa fa-link"aria-hidden="true"></i></a>Gimbal Protocol (v2)</h1><blockquote class="alert alert-info clearfix"><strong class="fa fa-2x fa-edit"></strong><p>This version is marked as work-in-progress. This means that it is still subject to change.</p></blockquote><p><span></span></p><blockquote class="alert alert-info clearfix"><strong class="fa fa-2x fa-edit"></strong><p>This version supersedes <a href="gimbal.html">Gimbal Protocol v1</a></p></blockquote><h2 id="introduction"><a href="#introduction"class="plugin-anchor"name="introduction"><i class="fa fa-link"aria-hidden="true"></i></a>Introduction</h2><p>The gimbal protocol allows MAVLink control over the attitude/orientation of cameras (or other sensors) mounted on the drone. The orientation can be: controlled by the pilot in real time (e.g. using a joystick from a ground station), set as part of a mission, or moved based on camera tracking.</p><p>The protocol also defines what status information is published for developers, configurators, as well as users of the drone. It additionally provides ways to assign control to different sources.</p><p>The protocol supports a number of hardware setups, and enables gimbals with varying capabilities.</p><blockquote class="alert alert-info clearfix"><strong class="fa fa-2x fa-edit"></strong><p>The original protocol design document <a href="https://docs.google.com/document/d/16pekKRXLN2FhlL9YNFP983cjfBKAsDwN0gOSks8USo4/edit?usp=sharing"target="_blank">can be found here</a>.</p></blockquote><h2 id="concepts"><a href="#concepts"class="plugin-anchor"name="concepts"><i class="fa fa-link"aria-hidden="true"></i></a>Concepts</h2><h3 id="gimbal-manager-and-gimbal-device"><a href="#gimbal-manager-and-gimbal-device"class="plugin-anchor"name="gimbal-manager-and-gimbal-device"><i class="fa fa-link"aria-hidden="true"></i></a>Gimbal Manager and Gimbal Device</h3><p>To accommodate gimbals with varying capabilities, and various hardware setups, &quot;a gimbal&quot; is conceptually split into two parts:</p><ul><li><strong>Gimbal Device:</strong> the actual gimbal device, hardware and software.</li><li><strong>Gimbal Manager:</strong> software to deconflict gimbal messages and commands from different sources, and to abstract the capabilities of the <strong>Gimbal Device</strong> from gimbal users.</li></ul><p>The <em>Gimbal Manager</em> and <em>Gimbal Device</em> expose respective <em>message sets</em> that can be used for: gimbal manager/device discovery, querying capabilities, publishing status, and various types of orientation/attitude control.</p><p>The key concept to understand is that a <em>Gimbal Manager</em> has a 1:1 relationship with a particular <em>Gimbal Device</em>, and is the only party on the MAVLink network that is allowed to directly command that device - it does so using the <em>Gimbal Device message set</em>.</p><blockquote class="alert alert-info clearfix"><strong class="fa fa-2x fa-edit"></strong><p>The <em>Gimbal Device</em> must act only upon messages that come from the associated <em>Gimbal Manager</em>! The device will however <em>broadcast</em> its status to all parties on the network (not just its manager).</p></blockquote><p>MAVLink applications (ground stations, developer APIs like the MAVSDK, etc.), and any other software that wants to control a particular gimbal, must do so via its <em>Gimbal Manager</em>, using the <em>Gimbal Manager message set</em>.</p><p>Note that the gimbal manager is (by default) implemented on the autopilot.</p><h3 id="common-set-ups"><a href="#common-set-ups"class="plugin-anchor"name="common-set-ups"><i class="fa fa-link"aria-hidden="true"></i></a>Common Set-ups</h3><p>This section outlines the three most common hardware set-ups.</p><h4 id="simple-gimbal-directly-connected-to-autopilot"><a href="#simple-gimbal-directly-connected-to-autopilot"class="plugin-anchor"name="simple-gimbal-directly-connected-to-autopilot"><i class="fa fa-link"aria-hidden="true"></i></a>Simple Gimbal Directly Connected to Autopilot</h4><p>In this (default) set-up the autopilot takes the role of the gimbal manager.</p><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiZ3JhcGggTFJcblx0YXBbXCJBdXRvcGlsb3QgKEdpbWJhbCBNYW5hZ2VyKVwiXVxuXHRnW1wiR2ltYmFsIERldmljZVwiXVxuXHRnY3NbXCJHcm91bmQgU3RhdGlvblwiXVxuXHRhcCAtLS18XCJHaW1iYWwgZGV2aWNlIG1lc3NhZ2VzXCJ8IGdcblx0Z2NzIC0tLXxcIkdpbWJhbCBtYW5hZ2VyIG1lc3NhZ2VzXCJ8IGFwIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0"target="_blank"><img alt=""src="https://mermaid.ink/img/eyJjb2RlIjoiZ3JhcGggTFJcblx0YXBbXCJBdXRvcGlsb3QgKEdpbWJhbCBNYW5hZ2VyKVwiXVxuXHRnW1wiR2ltYmFsIERldmljZVwiXVxuXHRnY3NbXCJHcm91bmQgU3RhdGlvblwiXVxuXHRhcCAtLS18XCJHaW1iYWwgZGV2aWNlIG1lc3NhZ2VzXCJ8IGdcblx0Z2NzIC0tLXxcIkdpbWJhbCBtYW5hZ2VyIG1lc3NhZ2VzXCJ8IGFwIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0"></a></p><h4 id="standalone-integrated-cameragimbal"><a href="#standalone-integrated-cameragimbal"class="plugin-anchor"name="standalone-integrated-cameragimbal"><i class="fa fa-link"aria-hidden="true"></i></a>Standalone Integrated Camera/Gimbal</h4><p>In this set-up the integrated camera/gimbal itself can be the <em>Gimbal Manager</em>.</p><p>Therefore, the gimbal device interface is internal (no implementation is required).</p><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiZ3JhcGggTFJcblx0YXBbXCJBdXRvcGlsb3RcIl1cblx0Z1tcIkNhbWVyYSAvIEdpbWJhbCAoR2ltYmFsIE1hbmFnZXIpXCJdXG5cdGdjc1tcIkdyb3VuZCBTdGF0aW9uXCJdXG5cdGFwIC0tLXxcIkdpbWJhbCBtYW5hZ2VyIG1lc3NhZ2VzXCJ8IGdcblx0Z2NzIC0tLXxcIkdpbWJhbCBtYW5hZ2VyIG1lc3NhZ2VzXCJ8ZyIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9"target="_blank"><img alt=""src="https://mermaid.ink/img/eyJjb2RlIjoiZ3JhcGggTFJcblx0YXBbXCJBdXRvcGlsb3RcIl1cblx0Z1tcIkNhbWVyYSAvIEdpbWJhbCAoR2ltYmFsIE1hbmFnZXIpXCJdXG5cdGdjc1tcIkdyb3VuZCBTdGF0aW9uXCJdXG5cdGFwIC0tLXxcIkdpbWJhbCBtYW5hZ2VyIG1lc3NhZ2VzXCJ8IGdcblx0Z2NzIC0tLXxcIkdpbWJhbCBtYW5hZ2VyIG1lc3NhZ2VzXCJ8ZyIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9"></a></p><h4 id="onboard-computer-with-camera-and-gimbal-connected-to-autopilot"><a href="#onboard-computer-with-camera-and-gimbal-connected-to-autopilot"class="plugin-anchor"name="onboard-computer-with-camera-and-gimbal-connected-to-autopilot"><i class="fa fa-link"aria-hidden="true"></i></a>Onboard Computer with Camera and Gimbal Connected to Autopilot</h4><p>In this set-up the <em>Gimbal Manager</em> can be on the onboard computer.</p><p>Commands from the GCS (etc.) are sent to the <em>Gimbal Manager</em> on the companion computer. Messages from the <em>Gimbal Manager</em> to the <em>Gimbal Device</em> need to be sent to/routed through the autopilot.</p><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiZ3JhcGggTFJcblx0YXBbXCJBdXRvcGlsb3RcIl1cblx0Y2NbXCJDb21wYW5pb24gKEdpbWJhbCBNYW5hZ2VyKVwiXVxuXHRnW1wiR2ltYmFsIERldmljZVwiXVxuXHRnY3NbXCJHcm91bmQgU3RhdGlvblwiXVxuXHRhcCAtLS18XCJHaW1iYWwgZGV2aWNlIG1lc3NhZ2VzXCJ8Z1xuXHRhcCAtLS18XCJHaW1iYWwgZGV2aWNlIG1lc3NhZ2VzXCJ8Y2Ncblx0Z2NzIC0tLXxcIkdpbWJhbCBtYW5hZ2VyIG1lc3NhZ2VzXCJ8Y2MiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"target="_blank"><img alt=""src="https://mermaid.ink/img/eyJjb2RlIjoiZ3JhcGggTFJcblx0YXBbXCJBdXRvcGlsb3RcIl1cblx0Y2NbXCJDb21wYW5pb24gKEdpbWJhbCBNYW5hZ2VyKVwiXVxuXHRnW1wiR2ltYmFsIERldmljZVwiXVxuXHRnY3NbXCJHcm91bmQgU3RhdGlvblwiXVxuXHRhcCAtLS18XCJHaW1iYWwgZGV2aWNlIG1lc3NhZ2VzXCJ8Z1xuXHRhcCAtLS18XCJHaW1iYWwgZGV2aWNlIG1lc3NhZ2VzXCJ8Y2Ncblx0Z2NzIC0tLXxcIkdpbWJhbCBtYW5hZ2VyIG1lc3NhZ2VzXCJ8Y2MiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"></a></p><h3 id="multiple-gimbals"><a href="#multiple-gimbals"class="plugin-anchor"name="multiple-gimbals"><i class="fa fa-link"aria-hidden="true"></i></a>Multiple Gimbals</h3><p>Multiple gimbals per drone are supported.</p><h4 id="component-ids"><a href="#component-ids"class="plugin-anchor"name="component-ids"><i class="fa fa-link"aria-hidden="true"></i></a>Component IDs</h4><p>Multiple component IDs are reserved for gimbal devices: <code>MAV_COMP_ID_GIMBAL</code>, <code>MAV_COMP_ID_GIMBAL2</code>, <code>MAV_COMP_ID_GIMBAL3</code>, <code>MAV_COMP_ID_GIMBAL4</code>, <code>MAV_COMP_ID_GIMBAL5</code>, <code>MAV_COMP_ID_GIMBAL6</code>.</p><p>The listed component IDs should be used where possible (other ids may be used as long as the <a href="../messages/common.html#MAV_TYPE">MAV_TYPE</a> is correctly set to <a href="../messages/common.html#MAV_TYPE_GIMBAL">MAV_TYPE_GIMBAL</a>).</p><h4 id="mapping-from-gimbal-managers-to-gimbal-devices"><a href="#mapping-from-gimbal-managers-to-gimbal-devices"class="plugin-anchor"name="mapping-from-gimbal-managers-to-gimbal-devices"><i class="fa fa-link"aria-hidden="true"></i></a>Mapping from Gimbal Managers to Gimbal Devices</h4><p>Every <em>Gimbal Manager</em> must to publish its associated <em>Gimbal Device</em> (there is a 1:1 relationship) in its <a href="#GIMBAL_MANAGER_INFORMATION">GIMBAL_MANAGER_INFORMATION</a> message.</p><p>A particular MAVLink component can implement multiple gimbal managers (e.g. an autopilot can implement two gimbal managers in order to control two gimbal devices).</p><p>A gimbal manager can &quot;manage&quot; MAVLink gimbal devices as well as non-MAVLink gimbals such as a gimbal connected with proprietary or custom interface such as PWM or SBUS. A non-MAVLink gimbal is signalled and addressed using 1 to 6 as the <code>gimbal_device_id</code> instead of the MAVLink component ID.</p><h4 id="gimbal_device_addressing"><a href="#gimbal_device_addressing"class="plugin-anchor"name="gimbal_device_addressing"><i class="fa fa-link"aria-hidden="true"></i></a>Addressing of Gimbal MAVLink Devices</h4><p><em>Gimbal Manager</em> commands and messages have a param field to indicate the component ID of the <em>Gimbal Device</em> that they intend to control.</p><p>A system that wants to control a <em>particular</em> gimbal device will send messages to the component that has the manager(s), specifying the particular device to be controlled.</p><p>If all gimbal devices should be controlled (on the component that has the gimbal managers), this param/field can be set to 0 (signalling &quot;all&quot;).</p><h4 id="non_mavlink_gimbal_device_addressing"><a href="#non_mavlink_gimbal_device_addressing"class="plugin-anchor"name="non_mavlink_gimbal_device_addressing"><i class="fa fa-link"aria-hidden="true"></i></a>Addressing of non-MAVLink gimbal devices</h4><p>Non-MAVLink gimbal devices are gimbals that don&apos;t expose the MAVLink API, but instead are connected to the gimbal manager using some other protocol. For instance, this could be a PWM gimbal connected to an autopilot.</p><p>For these cases, there needs to be a way to address such a gimbal specifically, and a way to send out the <code>GIMBAL_DEVICE_</code> messages, so that they can re mapped back to the respective gimbal manager.</p><p>The solution chosen for this case is to use the numbers 1 to 6 as magic numbers for the <code>gimbal_device_id</code>. This means that the numbers 1 to 6 can&apos;t be used as MAVLink component IDs for any components involved as gimbal managers or gimbal devices.</p><ul><li><p>A <strong>gimbal manager</strong> advertises that it implements the gimbal device &quot;itself&quot; by setting <code>gimbal_device_id</code> to 1 to 6. It will also send out the requested gimbal device messages from the same component ID. It will set the field in <code>gimbal_device_id</code> of <a href="#GIMBAL_DEVICE_ATTITUDE_STATUS">GIMBAL_DEVICE_ATTITUDE_STATUS</a>.</p></li><li><p>A <strong>ground station</strong> addresses a gimbal device by sending commands to the gimbal manager and specifying the <code>gimbal_device_id</code> 1 to 6.</p></li></ul><h2 id="implementation-and-messages"><a href="#implementation-and-messages"class="plugin-anchor"name="implementation-and-messages"><i class="fa fa-link"aria-hidden="true"></i></a>Implementation and Messages</h2><h3 id="messages-between-ground-station-and-gimbal-manager"><a href="#messages-between-ground-station-and-gimbal-manager"class="plugin-anchor"name="messages-between-ground-station-and-gimbal-manager"><i class="fa fa-link"aria-hidden="true"></i></a>Messages between Ground Station and Gimbal Manager</h3><h4 id="discovery-of-gimbal-manager"><a href="#discovery-of-gimbal-manager"class="plugin-anchor"name="discovery-of-gimbal-manager"><i class="fa fa-link"aria-hidden="true"></i></a>Discovery of Gimbal Manager</h4><p>A ground station should initially discover all gimbal managers by sending a broadcast <a href="#MAV_CMD_REQUEST_MESSAGE">MAV_CMD_REQUEST_MESSAGE</a> for <a href="#GIMBAL_MANAGER_INFORMATION">GIMBAL_MANAGER_INFORMATION</a>. Every gimbal manager should respond with <code>GIMBAL_MANAGER_INFORMATION</code>.</p><p>The <code>GIMBAL_MANAGER_INFORMATION</code> contains important information such as gimbal capabilities (<a href="#GIMBAL_MANAGER_CAP_FLAGS">GIMBAL_MANAGER_CAP_FLAGS</a>), maximum angles and angle rates, as well as the <code>gimbal_component</code> which is the component ID of the <em>Gimbal Device</em> controlled by this <em>Gimbal Manager</em>.</p><h4 id="gimbal-manager-status"><a href="#gimbal-manager-status"class="plugin-anchor"name="gimbal-manager-status"><i class="fa fa-link"aria-hidden="true"></i></a>Gimbal Manager Status</h4><p>A <em>Gimbal Manager</em> should send out <a href="#GIMBAL_MANAGER_STATUS">GIMBAL_MANAGER_STATUS</a> at a low regular rate (e.g. 5 Hz) to inform the ground station about its status.</p><h3 id="starting--configuring-gimbal-control"><a href="#starting--configuring-gimbal-control"class="plugin-anchor"name="starting--configuring-gimbal-control"><i class="fa fa-link"aria-hidden="true"></i></a>Starting / Configuring Gimbal Control</h3><p>It is possible for multiple components to want to control a gimbal at the same time, e.g.: a ground station, a companion computer, or the autopilot running a mission.</p><p>In order to start controlling a gimbal, a component first needs to send the <a href="#MAV_CMD_DO_GIMBAL_MANAGER_CONFIGURE">MAV_CMD_DO_GIMBAL_MANAGER_CONFIGURE</a> command. This allows setting which MAVLink component (set by system ID and component ID) is in primary control and which one is in secondary control. The gimbal manager is to ignore any gimbal controls which come from MAVLink components that are not explicity set to &quot;in control&quot;. This should prevent conflicts between various inputs as long as all components are fair/co-operative when using the configure command.</p><p>To be co-operative entails the following rules:</p><ul><li>Don&apos;t send the configure manager configure command continuously but only once to initiate and once to stop control again.</li><li>Check the <a href="#GIMBAL_MANAGER_STATUS">GIMBAL_MANAGER_STATUS</a> about who is in control first and - if possible - warn user about planned action. For example, if the autopilot is in control of the gimbal as part of a mission, the ground station should ask the user first (i.e. via a pop-up) if they really want to take over manual control.</li><li>Don&apos;t forget to release control when an action/task is finished and set the sysid/compid to 0.</li></ul><blockquote class="alert alert-info clearfix"><strong class="fa fa-2x fa-edit"></strong><p>It is possible to assign control to another component too, not just to itself. For example, a smart shot running on a companion computer can set itself to be in primary control but assign a ground station for secondary control to e.g. nudge during the smart shot.</p><p><strong>Note</strong> The implementation of how primary and secondary control are combined or mixed is not defined by the protocol but up to the implementation. This allows flexibility for different use cases.</p></blockquote><h4 id="manual-gimbal-control-using-mavlink"><a href="#manual-gimbal-control-using-mavlink"class="plugin-anchor"name="manual-gimbal-control-using-mavlink"><i class="fa fa-link"aria-hidden="true"></i></a>Manual Gimbal Control using MAVLink</h4><p>A ground station can manually control a gimbal by sending <a href="#GIMBAL_MANAGER_SET_MANUAL_CONTROL">GIMBAL_MANAGER_SET_MANUAL_CONTROL</a>. This allows controlling the gimbal with either angles, or angular rates, using a normalized unit (-1..1). The gimbal device is responsible for translating the input based on angle, speed, and &quot;smoothness&quot; settings.</p><p>This input can additionally be scaled by the gimbal manager depending on its state. For example, if the gimbal manager is on a camera and knows the current zoom level / focal length of the camera, it can scale the angular rate down to support smooth paning and tilting.</p><h4 id="controlling-gimbal-angle-andor-angular-rate-using-mavlink"><a href="#controlling-gimbal-angle-andor-angular-rate-using-mavlink"class="plugin-anchor"name="controlling-gimbal-angle-andor-angular-rate-using-mavlink"><i class="fa fa-link"aria-hidden="true"></i></a>Controlling Gimbal Angle and/or Angular Rate using MAVLink</h4><p>A ground station, companion computer, or other MAVLink component can set the gimbal angle and/or angular rates using the messages <a href="#GIMBAL_MANAGER_SET_ATTITUDE">GIMBAL_MANAGER_SET_ATTITUDE</a> or <a href="#GIMBAL_MANAGER_SET_PITCHYAW">GIMBAL_MANAGER_SET_PITCHYAW</a>.</p><h3 id="messages-between-gimbal-manager-and-gimbal-device"><a href="#messages-between-gimbal-manager-and-gimbal-device"class="plugin-anchor"name="messages-between-gimbal-manager-and-gimbal-device"><i class="fa fa-link"aria-hidden="true"></i></a>Messages between Gimbal Manager and Gimbal Device</h3><h4 id="discovery-of-gimbal-device"><a href="#discovery-of-gimbal-device"class="plugin-anchor"name="discovery-of-gimbal-device"><i class="fa fa-link"aria-hidden="true"></i></a>Discovery of Gimbal Device</h4><p>The MAVlink node where the <em>Gimbal Manager</em> is implemented needs to discover <em>Gimbal Devices</em> by sending a broadcast <a href="#MAV_CMD_REQUEST_MESSAGE_2">MAV_CMD_REQUEST_MESSAGE</a> for <a href="#GIMBAL_DEVICE_INFORMATION">GIMBAL_DEVICE_INFORMATION</a>. Every gimbal device should respond with <code>GIMBAL_DEVICE_INFORMATION</code>.</p><p>The MAVLink node should then create as many <em>Gimbal Manager</em> instances as <em>Gimbal Devices</em> found.</p><h4 id="control-of-a-gimbal-device"><a href="#control-of-a-gimbal-device"class="plugin-anchor"name="control-of-a-gimbal-device"><i class="fa fa-link"aria-hidden="true"></i></a>Control of a Gimbal Device</h4><p>To control the angle and/or angular rate of the <em>Gimbal Device</em>, use the message <a href="#GIMBAL_DEVICE_SET_ATTITUDE">GIMBAL_DEVICE_SET_ATTITUDE</a>. If the gimbal manager has multiple gimbal control inputs available it should deconflict them as explained below.</p><h4 id="autopilot-state-for-gimbal-device"><a href="#autopilot-state-for-gimbal-device"class="plugin-anchor"name="autopilot-state-for-gimbal-device"><i class="fa fa-link"aria-hidden="true"></i></a>Autopilot State for Gimbal Device</h4><p>The autopilot should also send the message <a href="#AUTOPILOT_STATE_FOR_GIMBAL_DEVICE">AUTOPILOT_STATE_FOR_GIMBAL_DEVICE</a> to the gimbal device. This data is required by the <em>Gimbal Device</em> attitude estimator (horizon compensation), as well as to anticipate the vehicle&apos;s movements (e.g. the feed forward angular velocity in z-axis, so the current yaw intention).</p><h3 id="gimbal-device-broadcaststatus-messages"><a href="#gimbal-device-broadcaststatus-messages"class="plugin-anchor"name="gimbal-device-broadcaststatus-messages"><i class="fa fa-link"aria-hidden="true"></i></a>Gimbal Device Broadcast/Status Messages</h3><p>The gimbal device should send out its attitude and status in <a href="#GIMBAL_DEVICE_ATTITUDE_STATUS">GIMBAL_DEVICE_ATTITUDE_STATUS</a> at a regular rate, e.g. 10 Hz.</p><p>This message is a meant as broadcast, so it&apos;s set to the GCS, <em>Gimbal Manager</em>, and all parties on the network (not just <em>Gimbal Manager</em>, like all other messages).</p><h3 id="custom-gimbal-device-settings"><a href="#custom-gimbal-device-settings"class="plugin-anchor"name="custom-gimbal-device-settings"><i class="fa fa-link"aria-hidden="true"></i></a>Custom Gimbal Device Settings</h3><p>Custom gimbal settings can be accomplished using the component information microservice which is based on a <a href="component_information.html">component information file</a> (this is similar to the <a href="camera_def.html">camera definition file</a>).</p><h2 id="faq"><a href="#faq"class="plugin-anchor"name="faq"><i class="fa fa-link"aria-hidden="true"></i></a>FAQ</h2><h4 id="how-to-set-the-system-id-of-a-gimbal-device"><a href="#how-to-set-the-system-id-of-a-gimbal-device"class="plugin-anchor"name="how-to-set-the-system-id-of-a-gimbal-device"><i class="fa fa-link"aria-hidden="true"></i></a>How to set the System ID of a gimbal device?</h4><p>The system ID of all components (e.g. autopilot, companion computer, camera, gimbal) on a drone/system must be the same. This needs to be either done manually by configuration, or alternatively, the components need to listen to the heartbeat of the autopilot and then adjust their system ID accordingly.</p><h4 id="when-is-gimbal-device-also-a-gimbal-manager"><a href="#when-is-gimbal-device-also-a-gimbal-manager"class="plugin-anchor"name="when-is-gimbal-device-also-a-gimbal-manager"><i class="fa fa-link"aria-hidden="true"></i></a>When is Gimbal Device also a Gimbal Manager?</h4><p>The default case should be to use the <em>Gimbal Manager</em> in the autopilot. The only exception to this are integrated solutions containing a camera and gimbal for functionality like visual tracking.</p><h4 id="how-to-test-gimbal-device"><a href="#how-to-test-gimbal-device"class="plugin-anchor"name="how-to-test-gimbal-device"><i class="fa fa-link"aria-hidden="true"></i></a>How to test Gimbal Device?</h4><p>A <em>Gimbal Device</em> can be tested by connecting it to an autopilot with a <em>Gimbal Manager</em>. To avoid having to do a full setup including autopilot, a <a href="https://github.com/mavlink/MAVSDK/tree/develop/examples/gimbal_device_tester"target="_blank">direct test using MAVSDK</a> is available.</p><h4 id="how-to-control-a-gimbal-with-the-old-mavlink-protocol"><a href="#how-to-control-a-gimbal-with-the-old-mavlink-protocol"class="plugin-anchor"name="how-to-control-a-gimbal-with-the-old-mavlink-protocol"><i class="fa fa-link"aria-hidden="true"></i></a>How to control a gimbal with the old MAVLink protocol?</h4><p>Gimbals that use the (old) <a href="gimbal.html">Gimbal Protocol v1</a> should still be supported by autopilot software. Basically, the <em>Gimbal Manager</em> needs to translate the commands to the old protocol.</p><h4 id="how-to-control-a-gimbal-without-mavlink-support"><a href="#how-to-control-a-gimbal-without-mavlink-support"class="plugin-anchor"name="how-to-control-a-gimbal-without-mavlink-support"><i class="fa fa-link"aria-hidden="true"></i></a>How to control a gimbal without MAVLink support?</h4><p>Gimbals controlled using a protocol like PPM, PWM, SBUS or something proprietary can still be supported. The autopilot will have to act as the <em>Gimbal Manager</em> and provide the driver and translation to the respective protocol.</p><h4 id="what-about-rc-non-mavlink-control"><a href="#what-about-rc-non-mavlink-control"class="plugin-anchor"name="what-about-rc-non-mavlink-control"><i class="fa fa-link"aria-hidden="true"></i></a>What about RC (non-MAVLink) control?</h4><p>The autopilot needs to be configured to either accept MAVLink input (so <a href="#GIMBAL_MANAGER_SET_MANUAL_CONTROL">GIMBAL_MANAGER_SET_MANUAL_CONTROL</a>) or RC control. In both cases, the autopilot can then calculate a gimbal angle or angular rate from the manual control input and send the resulting setpoint to the gimbal device.</p><p>For RC control, the channels will have to be manually mapped/configured to control the gimbal. This is the same approach as is used for managing the input source for flying; it is up to the implementation to select either RC or MAVLink. The recommendation is to make it configurable using (for instance) a parameter.</p><h4 id="non-mavlink-gimbals"><a href="#non-mavlink-gimbals"class="plugin-anchor"name="non-mavlink-gimbals"><i class="fa fa-link"aria-hidden="true"></i></a>Non-MAVLink gimbals</h4><p>A non-MAVLink gimbal needs to be connected to a gimbal manager, which then takes care of sending the gimbal device messages. Since a non-MAVLink gimbal can&apos;t be addressed with a MAVLink component ID, the <code>gimbal_device_id</code> needs to be set to one of the magic values (1 to 6). This signals that the gimbal manager also is also acting as the gimbal device.</p><p>Also see <a href="#non_mavlink_gimbal_device_addressing">how to address non-MAVLink gimbal devices</a>.</p><h4 id="how-to-interpret-gimbaldeviceattitudestatus-yaw-gimbal-angle"><a href="#how-to-interpret-gimbaldeviceattitudestatus-yaw-gimbal-angle"class="plugin-anchor"name="how-to-interpret-gimbaldeviceattitudestatus-yaw-gimbal-angle"><i class="fa fa-link"aria-hidden="true"></i></a>How to interpret <code>GIMBAL_DEVICE_ATTITUDE_STATUS</code> yaw gimbal angle</h4><p>The <a href="#GIMBAL_DEVICE_ATTITUDE_STATUS">GIMBAL_DEVICE_ATTITUDE_STATUS.flags</a> field must report the frame used for reported yaw values as <strong>either</strong>:</p><ul><li><code>GIMBAL_DEVICE_FLAGS_YAW_IN_VEHICLE_FRAME</code>: Yaw is relative to vehicle.</li><li><code>GIMBAL_DEVICE_FLAGS_YAW_IN_EARTH_FRAME</code>: Yaw is relative to north.</li></ul><p>For older devices, if neither of the flags above are set, the yaw frame must be inferred from the <code>GIMBAL_DEVICE_FLAGS_YAW_LOCK</code>. If it is set, the yaw is relative to North, otherwise to the front of the vehicle.</p><blockquote class="alert alert-info clearfix"><strong class="fa fa-2x fa-edit"></strong><p>Manufacturers working on new gimbal devices should set either <code>GIMBAL_DEVICE_FLAGS_YAW_IN_VEHICLE_FRAME</code> or <code>GIMBAL_DEVICE_FLAGS_YAW_IN_EARTH_FRAME</code>. Components recieving the message should also handle <code>GIMBAL_DEVICE_FLAGS_YAW_LOCK</code> for backwards compatibility with older devices.</p></blockquote><h2 id="messagecommandenum-summary"><a href="#messagecommandenum-summary"class="plugin-anchor"name="messagecommandenum-summary"><i class="fa fa-link"aria-hidden="true"></i></a>Message/Command/Enum Summary</h2><h3 id="gimbal-manager-messages"><a href="#gimbal-manager-messages"class="plugin-anchor"name="gimbal-manager-messages"><i class="fa fa-link"aria-hidden="true"></i></a>Gimbal Manager Messages</h3><p>This is the set of messages/enums for communicating with the gimbal manager (by ground station, autopilot, etc.).</p><table><thead><tr><th>Message</th><th>Description</th></tr></thead><tbody><tr><td><a id="GIMBAL_MANAGER_INFORMATION"></a><a href="../messages/common.html#GIMBAL_MANAGER_INFORMATION">GIMBAL_MANAGER_INFORMATION</a></td><td>Information about a high level gimbal manager. This message should be requested by a ground station using <a href="#MAV_CMD_REQUEST_MESSAGE">MAV_CMD_REQUEST_MESSAGE</a>.</td></tr><tr><td><a id="GIMBAL_MANAGER_STATUS"></a><a href="../messages/common.html#GIMBAL_MANAGER_STATUS">GIMBAL_MANAGER_STATUS</a></td><td>Current status about a high level gimbal manager. This message should be broadcast at a low regular rate (e.g. 5Hz).</td></tr><tr><td><a id="GIMBAL_MANAGER_SET_ATTITUDE"></a><a href="../messages/common.html#GIMBAL_MANAGER_SET_ATTITUDE">GIMBAL_MANAGER_SET_ATTITUDE</a></td><td>High level message to control a gimbal&apos;s attitude. This message is to be sent to the gimbal manager (e.g. from a ground station).</td></tr><tr><td><a id="GIMBAL_MANAGER_SET_MANUAL_CONTROL"></a><a href="../messages/common.html#GIMBAL_MANAGER_SET_MANUAL_CONTROL">GIMBAL_MANAGER_SET_MANUAL_CONTROL</a></td><td>High level message to control a gimbal manually, so without units. The actual angles or angular rates will be produced by the gimbal manager based on settings. This message is to be sent to the gimbal manager (e.g. from a ground station). Angles and rates can be set to NaN according to use case.</td></tr><tr><td><a id="GIMBAL_MANAGER_SET_PITCHYAW"></a><a href="../messages/common.html#GIMBAL_MANAGER_SET_PITCHYAW">GIMBAL_MANAGER_SET_PITCHYAW</a></td><td>High level message to control a gimbal&apos;s pitch and yaw angles. This message is to be sent to the gimbal manager (e.g. from a ground station). Angles and rates can be set to NaN according to use case.</td></tr></tbody></table><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td><a id="MAV_CMD_REQUEST_MESSAGE"></a><a href="../messages/common.html#MAV_CMD_REQUEST_MESSAGE">MAV_CMD_REQUEST_MESSAGE</a></td><td>Request the target system(s) emit a single instance of a specified message. This is used to request <a href="#GIMBAL_MANAGER_INFORMATION">GIMBAL_MANAGER_INFORMATION</a>.</td></tr><tr><td><a id="MAV_CMD_DO_GIMBAL_MANAGER_CONFIGURE"></a><a href="../messages/common.html#MAV_CMD_DO_GIMBAL_MANAGER_CONFIGURE">MAV_CMD_DO_GIMBAL_MANAGER_CONFIGURE</a></td><td>Gimbal configuration to set which sysid/compid is in primary and secondary control.</td></tr><tr><td><a id="MAV_CMD_DO_GIMBAL_MANAGER_PITCHYAW"></a><a href="../messages/common.html#MAV_CMD_DO_GIMBAL_MANAGER_PITCHYAW">MAV_CMD_DO_GIMBAL_MANAGER_PITCHYAW</a></td><td>High level setpoint to be sent to a gimbal manager to set a gimbal attitude. Note: a gimbal is never to react to this command but only the gimbal manager.</td></tr><tr><td><a id="MAV_CMD_DO_SET_ROI_LOCATION"></a><a href="../messages/common.html#MAV_CMD_DO_SET_ROI_LOCATION">MAV_CMD_DO_SET_ROI_LOCATION</a></td><td>Sets the region of interest (ROI) to a location. This can then be used by the vehicle&apos;s control system to control the vehicle attitude and the attitude of various sensors such as cameras. This command can be sent to a gimbal manager but not to a gimbal device. A gimbal is not to react to this message.</td></tr><tr><td><a id="MAV_CMD_DO_SET_ROI_WPNEXT_OFFSET"></a><a href="../messages/common.html#MAV_CMD_DO_SET_ROI_WPNEXT_OFFSET">MAV_CMD_DO_SET_ROI_WPNEXT_OFFSET</a></td><td>Sets the region of interest (ROI) to be toward next waypoint, with optional pitch/roll/yaw offset. This can then be used by the vehicle&apos;s control system to control the vehicle attitude and the attitude of various sensors such as cameras. This command can be sent to a gimbal manager but not to a gimbal device. A gimbal device is not to react to this message.</td></tr><tr><td><a id="MAV_CMD_DO_SET_ROI_SYSID"></a><a href="../messages/common.html#MAV_CMD_DO_SET_ROI_SYSID">MAV_CMD_DO_SET_ROI_SYSID</a></td><td>Mount tracks system with specified system ID. Determination of target vehicle position may be done with GLOBAL_POSITION_INT or any other means. This command can be sent to a gimbal manager but not to a gimbal device. A gimbal device is not to react to this message.</td></tr><tr><td><a id="MAV_CMD_DO_SET_ROI_NONE"></a><a href="../messages/common.html#MAV_CMD_DO_SET_ROI_NONE">MAV_CMD_DO_SET_ROI_NONE</a></td><td>Cancels any previous ROI command returning the vehicle/sensors to default flight characteristics. This can then be used by the vehicle&apos;s control system to control the vehicle attitude and the attitude of various sensors such as cameras. This command can be sent to a gimbal manager but not to a gimbal device. A gimbal device is not to react to this message. After this command the gimbal manager should go back to manual input if available, and otherwise assume a neutral position.</td></tr><tr><td><a id="MAV_CMD_DO_GIMBAL_MANAGER_TRACK_POINT"></a><a href="../messages/common.html#MAV_CMD_DO_GIMBAL_MANAGER_TRACK_POINT">MAV_CMD_DO_GIMBAL_MANAGER_TRACK_POINT</a></td><td>If the gimbal manager supports visual tracking (<code>GIMBAL_MANAGER_CAP_FLAGS_HAS_TRACKING_POINT</code> is set), this command allows to initiate the tracking. Such a tracking gimbal manager would usually be an integrated camera/gimbal, or alternatively a companion computer connected to a camera.</td></tr><tr><td><a id="MAV_CMD_DO_GIMBAL_MANAGER_TRACK_RECTANGLE"></a><a href="../messages/common.html#MAV_CMD_DO_GIMBAL_MANAGER_TRACK_RECTANGLE">MAV_CMD_DO_GIMBAL_MANAGER_TRACK_RECTANGLE</a></td><td>If the gimbal supports visual tracking (GIMBAL_MANAGER_CAP_FLAGS_HAS_TRACKING_RECTANGLE is set), this command allows to initiate the tracking. Such a tracking gimbal manager would usually be an integrated camera/gimbal, or alternatively a companion computer connected to a camera.</td></tr></tbody></table><table><thead><tr><th>Enum</th><th>Description</th></tr></thead><tbody><tr><td><a id="GIMBAL_MANAGER_FLAGS"></a><a href="../messages/common.html#GIMBAL_MANAGER_FLAGS">GIMBAL_MANAGER_FLAGS</a></td><td>Flags for high level gimbal manager operation.<br>The first 16 bytes are identical to the <a href="#GIMBAL_DEVICE_FLAGS">GIMBAL_DEVICE_FLAGS</a>. Used in <a href="#MAV_CMD_DO_GIMBAL_MANAGER_PITCHYAW">MAV_CMD_DO_GIMBAL_MANAGER_PITCHYAW</a>, <a href="#GIMBAL_MANAGER_STATUS">GIMBAL_MANAGER_STATUS </a>, <a href="#GIMBAL_MANAGER_SET_ATTITUDE">GIMBAL_MANAGER_SET_ATTITUDE</a>.</td></tr><tr><td><a id="GIMBAL_MANAGER_CAP_FLAGS"></a><a href="../messages/common.html#GIMBAL_MANAGER_CAP_FLAGS">GIMBAL_MANAGER_CAP_FLAGS</a></td><td>Gimbal manager high level capability flags (bitmap).<br>The first 16 bits are identical to the GIMBAL_DEVICE_CAP_FLAGS which are identical with GIMBAL_DEVICE_FLAGS. However, the gimbal manager does not need to copy the flags from the gimbal but can also enhance the capabilities and thus add flags. Used in <a href="#GIMBAL_MANAGER_INFORMATION">GIMBAL_MANAGER_INFORMATION</a></td></tr></tbody></table><h3 id="gimbal-device-messages"><a href="#gimbal-device-messages"class="plugin-anchor"name="gimbal-device-messages"><i class="fa fa-link"aria-hidden="true"></i></a>Gimbal Device Messages</h3><p>This is the set of messages/enums for communication between gimbal manager and gimbal device.</p><table><thead><tr><th>Message</th><th>Description</th></tr></thead><tbody><tr><td><a id="GIMBAL_DEVICE_INFORMATION"></a><a href="../messages/common.html#GIMBAL_DEVICE_INFORMATION">GIMBAL_DEVICE_INFORMATION</a></td><td>Information about a low level gimbal. This message should be requested by the gimbal manager or a ground station using <code>MAV_CMD_REQUEST_MESSAGE</code>.</td></tr><tr><td><a id="GIMBAL_DEVICE_SET_ATTITUDE"></a><a href="../messages/common.html#GIMBAL_DEVICE_SET_ATTITUDE">GIMBAL_DEVICE_SET_ATTITUDE</a></td><td>Low level message to control a gimbal device&apos;s attitude. This message is to be sent from the gimbal manager to the gimbal device component. Angles and rates can be set to NaN according to use case.</td></tr><tr><td><a id="GIMBAL_DEVICE_ATTITUDE_STATUS"></a><a href="../messages/common.html#GIMBAL_DEVICE_ATTITUDE_STATUS">GIMBAL_DEVICE_ATTITUDE_STATUS</a></td><td>Message reporting the status of a gimbal device. This message should be broadcasted by a gimbal device component.</td></tr></tbody></table><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td><a id="MAV_CMD_REQUEST_MESSAGE_2"></a><a href="../messages/common.html#MAV_CMD_REQUEST_MESSAGE">MAV_CMD_REQUEST_MESSAGE</a></td><td>Request the target system(s) emit a single instance of a specified message. This is used to request <a href="#GIMBAL_DEVICE_INFORMATION">GIMBAL_DEVICE_INFORMATION</a>.</td></tr></tbody></table><table><thead><tr><th>Enum</th><th>Description</th></tr></thead><tbody><tr><td><a id="GIMBAL_DEVICE_CAP_FLAGS"></a><a href="../messages/common.html#GIMBAL_DEVICE_CAP_FLAGS">GIMBAL_DEVICE_CAP_FLAGS</a></td><td>Gimbal device (low level) capability flags (bitmap).<br>Used in <a href="#GIMBAL_DEVICE_INFORMATION">GIMBAL_DEVICE_INFORMATION</a>.</td></tr><tr><td><a id="GIMBAL_DEVICE_FLAGS"></a><a href="../messages/common.html#GIMBAL_DEVICE_FLAGS">GIMBAL_DEVICE_FLAGS</a></td><td>Flags for gimbal device (lower level) operation.<br>Used in <a href="#GIMBAL_DEVICE_ATTITUDE_STATUS">GIMBAL_DEVICE_ATTITUDE_STATUS</a> and <a href="#GIMBAL_DEVICE_SET_ATTITUDE">GIMBAL_DEVICE_SET_ATTITUDE</a>.</td></tr><tr><td><a id="GIMBAL_DEVICE_ERROR_FLAGS"></a><a href="../messages/common.html#GIMBAL_DEVICE_ERROR_FLAGS">GIMBAL_DEVICE_ERROR_FLAGS</a></td><td>Gimbal device (low level) error flags (bitmap, 0 means no error).<br>Used in <a href="#GIMBAL_DEVICE_ATTITUDE_STATUS">GIMBAL_DEVICE_ATTITUDE_STATUS</a>.</td></tr></tbody></table><h2 id="sequences"><a href="#sequences"class="plugin-anchor"name="sequences"><i class="fa fa-link"aria-hidden="true"></i></a>Sequences</h2><p>Depicted below are message sequences for some common scenarious.</p><h3 id="discovery"><a href="#discovery"class="plugin-anchor"name="discovery"><i class="fa fa-link"aria-hidden="true"></i></a>Discovery</h3><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgcGFydGljaXBhbnQgR3JvdW5kIFN0YXRpb25cbiAgICBwYXJ0aWNpcGFudCBHaW1iYWwgTWFuYWdlclxuICAgIHBhcnRpY2lwYW50IEdpbWJhbCBEZXZpY2VcbiAgICBHcm91bmQgU3RhdGlvbi0-PkdpbWJhbCBNYW5hZ2VyOiBDT01NQU5EX1JFUVVFU1RfTUVTU0FHRSAoR0lNQkFMX01BTkFHRVJfSU5GT1JNQVRJT04pXG4gICAgR2ltYmFsIE1hbmFnZXItPj5Hcm91bmQgU3RhdGlvbjogQ09NTUFORF9BQ0tcbiAgICBHaW1iYWwgTWFuYWdlci0-PkdpbWJhbCBEZXZpY2U6IENPTU1BTkRfUkVRVUVTVF9NRVNTQUdFIChHSU1CQUxfREVWSUNFX0lORk9STUFUSU9OKVxuICAgIEdpbWJhbCBEZXZpY2UtPj5HaW1iYWwgTWFuYWdlcjogQ09NTUFORF9BQ0tcbiAgICBHaW1iYWwgRGV2aWNlLT4-R2ltYmFsIE1hbmFnZXI6IEdJTUJBTF9ERVZJQ0VfSU5GT1JNQVRJT05cbiAgICBHaW1iYWwgTWFuYWdlci0-Pkdyb3VuZCBTdGF0aW9uOiBHSU1CQUxfTUFOQUdFUl9JTkZPUk1BVElPTlxuXG4iLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"target="_blank"><img alt=""src="https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgcGFydGljaXBhbnQgR3JvdW5kIFN0YXRpb25cbiAgICBwYXJ0aWNpcGFudCBHaW1iYWwgTWFuYWdlclxuICAgIHBhcnRpY2lwYW50IEdpbWJhbCBEZXZpY2VcbiAgICBHcm91bmQgU3RhdGlvbi0-PkdpbWJhbCBNYW5hZ2VyOiBDT01NQU5EX1JFUVVFU1RfTUVTU0FHRSAoR0lNQkFMX01BTkFHRVJfSU5GT1JNQVRJT04pXG4gICAgR2ltYmFsIE1hbmFnZXItPj5Hcm91bmQgU3RhdGlvbjogQ09NTUFORF9BQ0tcbiAgICBHaW1iYWwgTWFuYWdlci0-PkdpbWJhbCBEZXZpY2U6IENPTU1BTkRfUkVRVUVTVF9NRVNTQUdFIChHSU1CQUxfREVWSUNFX0lORk9STUFUSU9OKVxuICAgIEdpbWJhbCBEZXZpY2UtPj5HaW1iYWwgTWFuYWdlcjogQ09NTUFORF9BQ0tcbiAgICBHaW1iYWwgRGV2aWNlLT4-R2ltYmFsIE1hbmFnZXI6IEdJTUJBTF9ERVZJQ0VfSU5GT1JNQVRJT05cbiAgICBHaW1iYWwgTWFuYWdlci0-Pkdyb3VuZCBTdGF0aW9uOiBHSU1CQUxfTUFOQUdFUl9JTkZPUk1BVElPTlxuXG4iLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"></a></p><p>This shows a possible sequence on startup. Note that the gimbal manager could already discover the gimbal device before the ground station asks for the information.</p><h3 id="normal-manual-control"><a href="#normal-manual-control"class="plugin-anchor"name="normal-manual-control"><i class="fa fa-link"aria-hidden="true"></i></a>Normal Manual Control</h3><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgcGFydGljaXBhbnQgR3JvdW5kIFN0YXRpb25cbiAgICBwYXJ0aWNpcGFudCBHaW1iYWwgTWFuYWdlclxuICAgIHBhcnRpY2lwYW50IEdpbWJhbCBEZXZpY2VcbiAgICBHcm91bmQgU3RhdGlvbi0-PkdpbWJhbCBNYW5hZ2VyOiBHSU1CQUxfTUFOQUdFUl9TRVRfQVRUSVRVREUgKHN0cmVhbSlcbiAgICBHaW1iYWwgTWFuYWdlci0-PkdpbWJhbCBEZXZpY2U6IEdJTUJBTF9ERVZJQ0VfU0VUX0FUVElUVURFIChzdHJlYW0pXG4gICAgR2ltYmFsIERldmljZS0-PkdpbWJhbCBNYW5hZ2VyOiBHSU1CQUxfREVWSUNFX0FUVElUVURFX1NUQVRVUyAoc3RyZWFtKVxuICAgIEdpbWJhbCBEZXZpY2UtPj5Hcm91bmQgU3RhdGlvbjogR0lNQkFMX0RFVklDRV9BVFRJVFVERV9TVEFUVVMgKHN0cmVhbSkiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"target="_blank"><img alt=""src="https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgcGFydGljaXBhbnQgR3JvdW5kIFN0YXRpb25cbiAgICBwYXJ0aWNpcGFudCBHaW1iYWwgTWFuYWdlclxuICAgIHBhcnRpY2lwYW50IEdpbWJhbCBEZXZpY2VcbiAgICBHcm91bmQgU3RhdGlvbi0-PkdpbWJhbCBNYW5hZ2VyOiBHSU1CQUxfTUFOQUdFUl9TRVRfQVRUSVRVREUgKHN0cmVhbSlcbiAgICBHaW1iYWwgTWFuYWdlci0-PkdpbWJhbCBEZXZpY2U6IEdJTUJBTF9ERVZJQ0VfU0VUX0FUVElUVURFIChzdHJlYW0pXG4gICAgR2ltYmFsIERldmljZS0-PkdpbWJhbCBNYW5hZ2VyOiBHSU1CQUxfREVWSUNFX0FUVElUVURFX1NUQVRVUyAoc3RyZWFtKVxuICAgIEdpbWJhbCBEZXZpY2UtPj5Hcm91bmQgU3RhdGlvbjogR0lNQkFMX0RFVklDRV9BVFRJVFVERV9TVEFUVVMgKHN0cmVhbSkiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"></a></p><p>During the normal manual control, all messages are streamed at a regular rate. Note that <a href="#GIMBAL_DEVICE_ATTITUDE_STATUS">GIMBAL_DEVICE_ATTITUDE_STATUS</a> is broadcast to anyone, so to the gimbal manager and also the ground station.</p><h3 id="roi-initiated-from-ground-station"><a href="#roi-initiated-from-ground-station"class="plugin-anchor"name="roi-initiated-from-ground-station"><i class="fa fa-link"aria-hidden="true"></i></a>ROI Initiated from Ground Station</h3><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgcGFydGljaXBhbnQgR3JvdW5kIFN0YXRpb25cbiAgICBwYXJ0aWNpcGFudCBHaW1iYWwgTWFuYWdlclxuICAgIHBhcnRpY2lwYW50IEdpbWJhbCBEZXZpY2VcbiAgICBHcm91bmQgU3RhdGlvbi0-PkdpbWJhbCBNYW5hZ2VyOiBNQVZfQ01EX0RPX1NFVF9ST0lfTE9DQVRJT05cbiAgICBHaW1iYWwgTWFuYWdlci0-Pkdyb3VuZCBTdGF0aW9uOiBDT01NQU5EX0FDS1xuICAgIEdpbWJhbCBNYW5hZ2VyLT4-R2ltYmFsIERldmljZTogR0lNQkFMX0RFVklDRV9TRVRfQVRUSVRVREUgKHN0cmVhbSlcbiAgICBHaW1iYWwgRGV2aWNlLT4-R2ltYmFsIE1hbmFnZXI6IEdJTUJBTF9ERVZJQ0VfQVRUSVRVREVfU1RBVFVTIChzdHJlYW0pXG4gICAgR2ltYmFsIERldmljZS0-Pkdyb3VuZCBTdGF0aW9uOiBHSU1CQUxfREVWSUNFX0FUVElUVURFX1NUQVRVUyAoc3RyZWFtKVxuICAgIEdyb3VuZCBTdGF0aW9uLT4-R2ltYmFsIE1hbmFnZXI6IE1BVl9DTURfRE9fU0VUX1JPSV9OT05FXG4gICAgR2ltYmFsIE1hbmFnZXItPj5Hcm91bmQgU3RhdGlvbjogQ09NTUFORF9BQ0siLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"target="_blank"><img alt=""src="https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgcGFydGljaXBhbnQgR3JvdW5kIFN0YXRpb25cbiAgICBwYXJ0aWNpcGFudCBHaW1iYWwgTWFuYWdlclxuICAgIHBhcnRpY2lwYW50IEdpbWJhbCBEZXZpY2VcbiAgICBHcm91bmQgU3RhdGlvbi0-PkdpbWJhbCBNYW5hZ2VyOiBNQVZfQ01EX0RPX1NFVF9ST0lfTE9DQVRJT05cbiAgICBHaW1iYWwgTWFuYWdlci0-Pkdyb3VuZCBTdGF0aW9uOiBDT01NQU5EX0FDS1xuICAgIEdpbWJhbCBNYW5hZ2VyLT4-R2ltYmFsIERldmljZTogR0lNQkFMX0RFVklDRV9TRVRfQVRUSVRVREUgKHN0cmVhbSlcbiAgICBHaW1iYWwgRGV2aWNlLT4-R2ltYmFsIE1hbmFnZXI6IEdJTUJBTF9ERVZJQ0VfQVRUSVRVREVfU1RBVFVTIChzdHJlYW0pXG4gICAgR2ltYmFsIERldmljZS0-Pkdyb3VuZCBTdGF0aW9uOiBHSU1CQUxfREVWSUNFX0FUVElUVURFX1NUQVRVUyAoc3RyZWFtKVxuICAgIEdyb3VuZCBTdGF0aW9uLT4-R2ltYmFsIE1hbmFnZXI6IE1BVl9DTURfRE9fU0VUX1JPSV9OT05FXG4gICAgR2ltYmFsIE1hbmFnZXItPj5Hcm91bmQgU3RhdGlvbjogQ09NTUFORF9BQ0siLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"></a></p><p>ROI can be started using a command and should also be stopped again with a command. The ROI command is translated to a gimbal attitude in the the gimbal manager.</p><h3 id="attitude-set-during-mission"><a href="#attitude-set-during-mission"class="plugin-anchor"name="attitude-set-during-mission"><i class="fa fa-link"aria-hidden="true"></i></a>Attitude Set During Mission</h3><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgcGFydGljaXBhbnQgR3JvdW5kIFN0YXRpb25cbiAgICBwYXJ0aWNpcGFudCBHaW1iYWwgTWFuYWdlclxuICAgIHBhcnRpY2lwYW50IEdpbWJhbCBEZXZpY2VcbiAgICBHaW1iYWwgTWFuYWdlci0-PkdpbWJhbCBNYW5hZ2VyOiBDTURfRE9fR0lNQkFMX01BTkFHRVJfQVRUSVRVREVcbiAgICBHaW1iYWwgTWFuYWdlci0-PkdpbWJhbCBEZXZpY2U6IEdJTUJBTF9ERVZJQ0VfU0VUX0FUVElUVURFIChzdHJlYW0pXG4gICAgR2ltYmFsIERldmljZS0-PkdpbWJhbCBNYW5hZ2VyOiBHSU1CQUxfREVWSUNFX0FUVElUVURFX1NUQVRVUyAoc3RyZWFtKVxuICAgIEdpbWJhbCBEZXZpY2UtPj5Hcm91bmQgU3RhdGlvbjogR0lNQkFMX0RFVklDRV9BVFRJVFVERV9TVEFUVVMgKHN0cmVhbSlcbiAgICBHaW1iYWwgTWFuYWdlci0-PkdpbWJhbCBNYW5hZ2VyOiBDTURfRE9fR0lNQkFMX01BTkFHRVJfQVRUSVRVREUgKEZsYWc6IE5PTkUpIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0"target="_blank"><img alt=""src="https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgcGFydGljaXBhbnQgR3JvdW5kIFN0YXRpb25cbiAgICBwYXJ0aWNpcGFudCBHaW1iYWwgTWFuYWdlclxuICAgIHBhcnRpY2lwYW50IEdpbWJhbCBEZXZpY2VcbiAgICBHaW1iYWwgTWFuYWdlci0-PkdpbWJhbCBNYW5hZ2VyOiBDTURfRE9fR0lNQkFMX01BTkFHRVJfQVRUSVRVREVcbiAgICBHaW1iYWwgTWFuYWdlci0-PkdpbWJhbCBEZXZpY2U6IEdJTUJBTF9ERVZJQ0VfU0VUX0FUVElUVURFIChzdHJlYW0pXG4gICAgR2ltYmFsIERldmljZS0-PkdpbWJhbCBNYW5hZ2VyOiBHSU1CQUxfREVWSUNFX0FUVElUVURFX1NUQVRVUyAoc3RyZWFtKVxuICAgIEdpbWJhbCBEZXZpY2UtPj5Hcm91bmQgU3RhdGlvbjogR0lNQkFMX0RFVklDRV9BVFRJVFVERV9TVEFUVVMgKHN0cmVhbSlcbiAgICBHaW1iYWwgTWFuYWdlci0-PkdpbWJhbCBNYW5hZ2VyOiBDTURfRE9fR0lNQkFMX01BTkFHRVJfQVRUSVRVREUgKEZsYWc6IE5PTkUpIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0"></a></p><p>In this case the gimbal manager is implemented by the autopilot which &quot;sends&quot; the attitude command (for instance for a survey).</p><h2 id="how-to-implement-the-gimbal-device-interface"><a href="#how-to-implement-the-gimbal-device-interface"class="plugin-anchor"name="how-to-implement-the-gimbal-device-interface"><i class="fa fa-link"aria-hidden="true"></i></a>How to Implement the Gimbal Device Interface</h2><p>Below is a short summary of all messages that a gimbal device should implement.</p><blockquote class="alert alert-info clearfix"><strong class="fa fa-2x fa-edit"></strong><p>A <em>Gimbal Device</em> can be tested by connecting it to an autopilot with a <em>Gimbal Manager</em>. To avoid having to do a full setup including autopilot, a <a href="https://github.com/mavlink/MAVSDK/tree/develop/examples/gimbal_device_tester"target="_blank">direct test using MAVSDK</a> is available.</p></blockquote><h3 id="messages-to-send"><a href="#messages-to-send"class="plugin-anchor"name="messages-to-send"><i class="fa fa-link"aria-hidden="true"></i></a>Messages to Send</h3><p>The messages listed should be broadcast on the network/on all connections (sent to everyone).</p><h4 id="heartbeat"><a href="#heartbeat"class="plugin-anchor"name="heartbeat"><i class="fa fa-link"aria-hidden="true"></i></a><a href="../messages/common.html#HEARTBEAT">HEARTBEAT</a></h4><p>Heartbeats should always be sent (usually at 1 Hz).</p><blockquote class="alert alert-info clearfix"><strong class="fa fa-2x fa-edit"></strong><p>Gimbals that set their <code>sysid</code> from the autopilot will need to wait for the autopilot&apos;s heartbeat before emitting their own (note that if the gimbal can receive heartbeats from multiple autopilots then the <code>sysid</code> must be explicitly/statically configured).</p></blockquote><ul><li><code>sysid</code>: the same sysid as the autopilot (this can either be done by configuration, or by listening to the autopilot&apos;s heartbeat first and then copying the sysid, default: 1)</li><li><code>compid</code>: <a href="../messages/common.html#MAV_COMP_ID_GIMBAL">MAV_COMP_ID_GIMBAL</a></li><li><code>type</code>: <a href="../messages/common.html#MAV_TYPE_GIMBAL">MAV_TYPE_GIMBAL</a></li><li><code>autopilot</code>: <a href="../messages/common.html#MAV_AUTOPILOT_INVALID">MAV_AUTOPILOT_INVALID</a></li><li><code>base_mode</code>: 0</li><li><code>custom_mode</code>: 0</li><li><code>system_status</code>: <code>MAV_STATE_UNINIT</code></li></ul><h4 id="gimbaldeviceattitudestatus"><a href="#gimbaldeviceattitudestatus"class="plugin-anchor"name="gimbaldeviceattitudestatus"><i class="fa fa-link"aria-hidden="true"></i></a><a href="#GIMBAL_DEVICE_ATTITUDE_STATUS">GIMBAL_DEVICE_ATTITUDE_STATUS</a></h4><p>The gimbal device should send out its attitude status at a regular rate, e.g. 10 Hz. The fields <code>target_system</code> and <code>target_component</code> can be set to 0 (broadcast) by default.</p><h4 id="gimbaldeviceinformation"><a href="#gimbaldeviceinformation"class="plugin-anchor"name="gimbaldeviceinformation"><i class="fa fa-link"aria-hidden="true"></i></a><a href="#GIMBAL_DEVICE_INFORMATION">GIMBAL_DEVICE_INFORMATION</a></h4><p>The static information about the gimbal device needs to be sent out when requested using <a href="../messages/common.html#MAV_CMD_REQUEST_MESSAGE">MAV_CMD_REQUEST_MESSAGE</a>.</p><h3 id="messages-to-listen-tohandle"><a href="#messages-to-listen-tohandle"class="plugin-anchor"name="messages-to-listen-tohandle"><i class="fa fa-link"aria-hidden="true"></i></a>Messages to Listen To/Handle</h3><h4 id="gimbaldevicesetattitude"><a href="#gimbaldevicesetattitude"class="plugin-anchor"name="gimbaldevicesetattitude"><i class="fa fa-link"aria-hidden="true"></i></a><a href="#GIMBAL_DEVICE_SET_ATTITUDE">GIMBAL_DEVICE_SET_ATTITUDE</a></h4><p>This is the actual attitude setpoint that the gimbal device should follow. Note that the frame of the quaternion setpoint depends on the <a href="#GIMBAL_DEVICE_FLAGS">GIMBAL_DEVICE_FLAGS</a>.</p><h4 id="autopilotstateforgimbaldevice"><a href="#autopilotstateforgimbaldevice"class="plugin-anchor"name="autopilotstateforgimbaldevice"><i class="fa fa-link"aria-hidden="true"></i></a><a href="#AUTOPILOT_STATE_FOR_GIMBAL_DEVICE">AUTOPILOT_STATE_FOR_GIMBAL_DEVICE</a></h4><p>The gimbal device should be able to get all the information from the autopilot that it requires in this one message. If something is missing that should be streamed at a high rate, it should be added to this message.</p><p>If this message is not sent by default by the autopilot, or the rate is not ok, the command <a href="../messages/common.html#MAV_CMD_SET_MESSAGE_INTERVAL">MAV_CMD_SET_MESSAGE_INTERVAL</a> can be used to request it at a certain rate.</p><h4 id="commandlong"><a href="#commandlong"class="plugin-anchor"name="commandlong"><i class="fa fa-link"aria-hidden="true"></i></a><a href="../messages/common.html#COMMAND_LONG">COMMAND_LONG</a></h4><p>The gimbal device needs to check for commands. See below which commands should get answered.</p><h3 id="commands-to-answer"><a href="#commands-to-answer"class="plugin-anchor"name="commands-to-answer"><i class="fa fa-link"aria-hidden="true"></i></a>Commands to Answer</h3><h4 id="mavcmdrequestmessage"><a href="#mavcmdrequestmessage"class="plugin-anchor"name="mavcmdrequestmessage"><i class="fa fa-link"aria-hidden="true"></i></a><a href="../messages/common.html#MAV_CMD_REQUEST_MESSAGE">MAV_CMD_REQUEST_MESSAGE</a></h4><p>The gimbal device should send out messages when they get requested, e.g. <a href="#GIMBAL_DEVICE_INFORMATION">GIMBAL_DEVICE_INFORMATION</a>.</p><h4 id="mavcmdsetmessageinterval"><a href="#mavcmdsetmessageinterval"class="plugin-anchor"name="mavcmdsetmessageinterval"><i class="fa fa-link"aria-hidden="true"></i></a><a href="../messages/common.html#MAV_CMD_SET_MESSAGE_INTERVAL">MAV_CMD_SET_MESSAGE_INTERVAL</a></h4><p>The gimbal device should stream messages at the rate requested.</p></section></div><div class="search-results"><div class="has-results"><h1 class="search-results-title"><span class="search-results-count"></span> results matching "<span class="search-query"></span>"</h1><ul class="search-results-list"></ul></div><div class="no-results"><h1 class="search-results-title">No results matching "<span class="search-query"></span>"</h1></div></div></div></div></div></div></div><script>var gitbook=gitbook||[];gitbook.push(function(){gitbook.page.hasChanged({page:{title:"Gimbal Protocol v2",level:"1.6.9",depth:2,next:{title:"Gimbal Protocol v1 (superseded)",level:"1.6.9.1",depth:3,path:"services/gimbal.md",ref:"services/gimbal.md",articles:[]},previous:{title:"Camera Protocol v1 (Simple Trigger Protocol)",level:"1.6.8",depth:2,path:"services/camera_v1.md",ref:"services/camera_v1.md",articles:[]},dir:"ltr"},config:{plugins:["theme-api","youtube","anchors","collapsible-menu","page-toc-button","language-picker","custom-favicon","richquotes@git+https://github.com/Dronecode/gitbook-plugin-richquotes.git","bulk-redirect@git+https://github.com/Dronecode/gitbook-plugin-bulk-redirect.git","toolbar@git+https://github.com/hamishwillee/gitbook-plugin-toolbar.git","-mermaid","theme-dronecode@git+https://github.com/dronecode/theme-dronecode.git","html-minifier"],styles:{website:"styles/website.css",pdf:"styles/pdf.css",epub:"styles/epub.css",mobi:"styles/mobi.css",ebook:"styles/ebook.css",print:"styles/print.css"},pluginsConfig:{"theme-dronecode":{logo:{logo_large:"../assets/site/logo_mavlink_header.png",logo_small:"../assets/site/logo_mavlink_header.png",url:"https://mavlink.io/en/"},menu:[{url:"https://mavlink.io/en/messages/common.html",text:"Messages",text_small:"Messages"},{url:"https://mavlink.io/en/about/faq.html",text:"FAQ",text_small:"FAQ"},{url:"https://mavlink.io/en/about/implementations.html",text:"Implementations",text_small:"Implementations"},{url:"https://mavlink.io/en/mavgen_c/examples.html",text:"Examples",text_small:"Examples"},{url:"https://mavlink.io/en/about/support.html",text:"Support",text_small:"Help"}]},"collapsible-menu":{},"language-picker":{"grid-columns":3},youtube:{},search:{},"html-minifier":{customAttrSurround:[],removeScriptTypeAttributes:!1,removeEmptyAttributes:!1,removeRedundantAttributes:!1,removeEmptyElements:!1,sortClassName:!0,caseSensitive:!0,html5:!0,collapseWhitespace:!0,processConditionalComments:!1,quoteCharacter:null,keepClosingSlash:!0,preventAttributesEscaping:!1,minifyURLs:!1,removeAttributeQuotes:!1,decodeEntities:!1,trimCustomFragments:!1,customAttrAssign:[],includeAutoGeneratedTags:!0,collapseInlineTagWhitespace:!1,collapseBooleanAttributes:!0,minifyJS:!0,removeTagWhitespace:!0,preserveLineBreaks:!1,sortAttributes:!0,removeStyleLinkTypeAttributes:!1,removeComments:!0,minifyCSS:!0,processScripts:[],conservativeCollapse:!1,removeOptionalTags:!1,useShortDoctype:!1},lunr:{maxIndexSize:1e6,ignoreSpecialCharacters:!1},fontsettings:{theme:"white",family:"sans",size:2},richquotes:{tip:{alert:"success",picto:"fa-thumbs-o-up"}},highlight:{},favicon:"favicon.ico","page-toc-button":{},"theme-api":{languages:[{lang:"c",name:"C/C++",default:!0},{lang:"python",name:"Python"},{lang:"js",name:"JavaScript"},{lang:"go",name:"Go"}],split:!0,theme:"light"},"bulk-redirect":{basepath:"/",redirectsFile:"redirects.json"},"custom-favicon":{},toolbar:{buttons:[{label:"Bug tracker",icon:"fa fa-bug",position:"left",url:"https://github.com/mavlink/mavlink-devguide/issues/new?title=Doc+Bug:+{{title}}&body=DESCRIBE+PROBLEM+WITH+DOCS+HERE%0A%0ABug+Page:+[{{title}}]({{url}})"},{label:"GitHub",icon:"fa fa-github",url:"https://github.com/mavlink/mavlink-devguide"},{label:"Edit page on github",icon:"fa fa-pencil-square-o",position:"left",url:"https://github.com/mavlink/mavlink-devguide/edit/master/{{filepath_lang}}"}]},sharing:{facebook:!0,twitter:!0,google:!1,weibo:!1,instapaper:!1,vk:!1,all:["facebook","google","twitter","weibo","instapaper"]},"theme-default":{styles:{website:"styles/website.css",pdf:"styles/pdf.css",epub:"styles/epub.css",mobi:"styles/mobi.css",ebook:"styles/ebook.css",print:"styles/print.css"},showLevel:!1},anchors:{}},theme:"default",pdf:{pageNumbers:!0,fontSize:12,fontFamily:"Arial",paperSize:"a4",chapterMark:"pagebreak",pageBreaksBefore:"/",margin:{right:62,left:62,top:56,bottom:56}},structure:{langs:"LANGS.md",readme:"README.md",glossary:"GLOSSARY.md",summary:"SUMMARY.md"},variables:{logo:"./assets/site/logo_mavlink_small.png"},title:"MAVLink Developer Guide",language:"en",gitbook:"*"},file:{path:"services/gimbal_v2.md",mtime:"2024-09-05T01:10:21.883Z",type:"markdown"},gitbook:{version:"3.2.3",time:"2024-09-05T01:11:13.895Z"},basePath:"..",book:{language:"en"}})})</script></div><script src="../../gitbook/gitbook.js"></script><script src="../../gitbook/theme.js"></script><script src="../../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script><script src="../../gitbook/gitbook-plugin-page-toc-button/plugin.js"></script><script src="../../gitbook/gitbook-plugin-language-picker/plugin.js"></script><script src="../../gitbook/gitbook-plugin-toolbar/buttons.js"></script><script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script><script src="../../gitbook/gitbook-plugin-search/search.js"></script><script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script><script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script><script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script><script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script><script src="../../gitbook/gitbook-plugin-theme-api/theme-api.js"></script></body></html>